function g(t){throw t}function p(){return function(){}}function r(t){return function(){return this[t]}}function aa(t){return function(){return t}}function ba(e,n){var i=e.split("."),o=t;!(i[0]in o)&&o.execScript&&o.execScript("var "+i[0]);for(var s;i.length&&(s=i.shift());)!i.length&&ca(n)?o[s]=n:o=o[s]?o[s]:o[s]={}}function da(){}function ea(t){t.pb=function(){return t.Bd?t.Bd:t.Bd=new t}}function fa(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function ca(t){return t!==i}function ga(t){return"array"==fa(t)}function ha(t){var e=fa(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){return"string"==typeof t}function v(t){return"function"==fa(t)}function ia(t){var e=typeof t;return"object"==e&&t!=m||"function"==e}function ja(t){return t[ka]||(t[ka]=++la)}function ma(t,e,n){return t.call.apply(t.bind,arguments)}function na(t,e,n){if(t||g(Error()),2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function oa(t,e,n){return oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na,oa.apply(m,arguments)}function pa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);return e.unshift.apply(e,n),t.apply(this,e)}}function z(t,e){function n(){}n.prototype=e.prototype,t.K=e.prototype,t.prototype=new n,t.prototype.constructor=t}function ra(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function sa(t){return ta.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(ua,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(va,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(wa,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(xa,"&quot;")),t):t}function ya(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})}function Da(t,e){var n;t:{n=t.length;for(var o=u(t)?t.split(""):t,s=0;s<n;s++)if(s in o&&e.call(i,o[s],s,t)){n=s;break t}n=-1}return 0>n?m:u(t)?t.charAt(n):t[n]}function Ea(t,e){return 0<=za(t,e)}function D(t,e){var n=za(t,e);0<=n&&B.splice.call(t,n,1)}function Fa(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function Ga(t,e){for(var n=1;n<arguments.length;n++){var i,o=arguments[n];if(ga(o)||(i=ha(o))&&o.hasOwnProperty("callee"))t.push.apply(t,o);else if(i)for(var s=t.length,r=o.length,a=0;a<r;a++)t[s+a]=o[a];else t.push(o)}}function Ha(t,e,n){return 2>=arguments.length?B.slice.call(t,e):B.slice.call(t,e,n)}function Ia(t,e){return t>e?1:t<e?-1:0}function Oa(){return t.navigator?t.navigator.userAgent:m}function Pa(){return t.navigator}function I(t){var e;if(!(e=bb[t])){e=0;for(var n=ra(String(Va)).split("."),i=ra(String(t)).split("."),o=Math.max(n.length,i.length),s=0;0==e&&s<o;s++){var r=n[s]||"",a=i[s]||"",h=RegExp("(\\d*)(\\D*)","g"),c=RegExp("(\\d*)(\\D*)","g");do{var u=h.exec(r)||["","",""],f=c.exec(a)||["","",""];if(0==u[0].length&&0==f[0].length)break;e=((0==u[1].length?0:parseInt(u[1],10))<(0==f[1].length?0:parseInt(f[1],10))?-1:(0==u[1].length?0:parseInt(u[1],10))>(0==f[1].length?0:parseInt(f[1],10))?1:0)||((0==u[2].length)<(0==f[2].length)?-1:(0==u[2].length)>(0==f[2].length)?1:0)||(u[2]<f[2]?-1:u[2]>f[2]?1:0)}while(0==e)}e=bb[t]=0<=e}return e}function db(t){return cb[t]||(cb[t]=E&&!!document.documentMode&&document.documentMode>=t)}function hb(t){return t=t.className,u(t)&&t.match(/\S+/g)||[]}function ib(t,e){var n=hb(t),i=Ha(arguments,1),o=n.length+i.length;return jb(n,i),t.className=n.join(" "),n.length==o}function kb(t,e){var n=hb(t),i=Ha(arguments,1),o=lb(n,i);return t.className=o.join(" "),o.length==n.length-i.length}function jb(t,e){for(var n=0;n<e.length;n++)Ea(t,e[n])||t.push(e[n])}function lb(t,e){return Aa(t,function(t){return!Ea(e,t)})}function mb(t,e,n){var i=hb(t);u(e)?D(i,e):ga(e)&&(i=lb(i,e)),u(n)&&!Ea(i,n)?i.push(n):ga(n)&&jb(i,n),t.className=i.join(" ")}function J(t,e){this.x=ca(t)?t:0,this.y=ca(e)?e:0}function nb(t,e){this.width=t,this.height=e}function ob(t,e){for(var n in t)e.call(i,t[n],n,t)}function qb(t,e){for(var n,i,o=1;o<arguments.length;o++){i=arguments[o];for(n in i)t[n]=i[n];for(var s=0;s<pb.length;s++)n=pb[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function rb(t){return t?new sb(K(t)):eb||(eb=new sb)}function tb(){var t,e,n,i;if(t=document,t.querySelectorAll&&t.querySelector)return t.querySelectorAll(".openseadragon-container");if(t.getElementsByClassName){var o=t.getElementsByClassName("openseadragon-container");return o}for(o=t.getElementsByTagName("*"),i={},e=n=0;t=o[e];e++){var s=t.className;"function"==typeof s.split&&Ea(s.split(/\s+/),"openseadragon-container")&&(i[n++]=t)}return i.length=n,i}function ub(t,e){ob(e,function(e,n){"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:n in vb?t.setAttribute(vb[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function wb(t,e,n){var i=arguments,o=document,s=i[0],r=i[1];if(!fb&&r&&(r.name||r.type)){if(s=["<",s],r.name&&s.push(' name="',sa(r.name),'"'),r.type){s.push(' type="',sa(r.type),'"');var a={};qb(a,r),delete a.type,r=a}s.push(">"),s=s.join("")}return s=o.createElement(s),r&&(u(r)?s.className=r:ga(r)?ib.apply(m,[s].concat(r)):ub(s,r)),2<i.length&&xb(o,s,i,2),s}function xb(t,e,i,o){function s(n){n&&e.appendChild(u(n)?t.createTextNode(n):n)}for(;o<i.length;o++){var r=i[o];if(!ha(r)||ia(r)&&0<r.nodeType)s(r);else{var a;t:{if(r&&"number"==typeof r.length){if(ia(r)){a="function"==typeof r.item||"string"==typeof r.item;break t}if(v(r)){a="function"==typeof r.item;break t}}a=n}C(a?Fa(r):r,s)}}}function yb(t){for(var e;e=t.firstChild;)t.removeChild(e)}function zb(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ab(t){return ia(t)&&1==t.nodeType}function Bb(t,e){if(t.contains&&1==e.nodeType)return t==e||t.contains(e);if("undefined"!=typeof t.compareDocumentPosition)return t==e||Boolean(16&t.compareDocumentPosition(e));for(;e&&t!=e;)e=e.parentNode;return e==t}function K(t){return 9==t.nodeType?t:t.ownerDocument||t.document}function Cb(t){var e=t.getAttributeNode("tabindex");return e&&e.specified?(t=t.tabIndex,"number"==typeof t&&0<=t&&32768>t):n}function sb(e){this.M=e||t.document||document}function Db(t){var e=t.M,t=G?e.body:e.documentElement,e=e.parentWindow||e.defaultView;return new J(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)}function Fb(t,e){var n=e||[];return t&&n.push(t),n}function Jb(t){function e(){if(0<=u&&(g.id=n(u,p).replace(/\\/g,""),u=-1),0<=f){var t=f==p?m:n(f,p);0>">~+".indexOf(t)?g.H=t:g.Qb=t,f=-1}0<=c&&(g.ca.push(n(c+1,p).replace(/\\/g,"")),c=-1)}function n(e,n){return ra(t.slice(e,n))}for(var i,t=0<=">~+".indexOf(t.slice(-1))?t+" * ":t+" ",o=[],s=-1,r=-1,a=-1,h=-1,c=-1,u=-1,f=-1,l="",d="",p=0,b=t.length,g=m,y=m;l=d,d=t.charAt(p),p<b;p++)"\\"!=l&&(g||(i=p,g={Ua:m,Ba:[],Ab:[],ca:[],H:m,Qb:m,id:m,rc:function(){return Ib?this.he:this.H}},f=p),0<=s?"]"==d?(y.nc?y.yc=n(a||s+1,p):y.nc=n(s+1,p),!(s=y.yc)||'"'!=s.charAt(0)&&"'"!=s.charAt(0)||(y.yc=s.slice(1,-1)),g.Ab.push(y),y=m,s=a=-1):"="==d&&(a=0<="|~^$*".indexOf(l)?l:"",y.type=a+d,y.nc=n(s+1,p-a.length),a=p+1):0<=r?")"==d&&(0<=h&&(y.value=n(r+1,p)),h=r=-1):"#"==d?(e(),u=p+1):"."==d?(e(),c=p):":"==d?(e(),h=p):"["==d?(e(),s=p,y={}):"("==d?(0<=h&&(y={name:n(h+1,p),value:m},g.Ba.push(y)),r=p):" "==d&&l!=d&&(e(),0<=h&&g.Ba.push({name:n(h+1,p)}),g.Ed=g.Ba.length||g.Ab.length||g.ca.length,g.ye=g.Ua=n(i,p),g.he=g.H=g.Qb?m:g.H||"*",g.H&&(g.H=g.H.toUpperCase()),o.length&&o[o.length-1].Qb&&(g.Ad=o.pop(),g.Ua=g.Ad.Ua+" "+g.Ua),o.push(g),g=m));return o}function Kb(t,e){return t?e?function(){return t.apply(window,arguments)&&e.apply(window,arguments)}:t:e}function Lb(t){return 1==t.nodeType}function Mb(t,e){return t?"class"==e?t.className||"":"for"==e?t.htmlFor||"":"style"==e?t.style.cssText||"":(Ib?t.getAttribute(e):t.getAttribute(e,2))||"":""}function Sb(t){for(;t=t[Qb];)if(Rb(t))return n;return j}function Tb(t){for(;t=t[Pb];)if(Rb(t))return n;return j}function Ub(t){var e=t.parentNode,n=0,i=e[Hb],o=t._i||-1,s=e._l||-1;if(!i)return-1;if(i=i.length,s==i&&0<=o&&0<=s)return o;for(e._l=i,o=-1,e=e.firstElementChild||e.firstChild;e;e=e[Pb])Rb(e)&&(e._i=++n,t===e&&(o=n));return o}function Vb(t){return!(Ub(t)%2)}function Wb(t){return Ub(t)%2}function Xb(t,e){if(!t)return Eb;var e=e||{},n=m;return e.D||(n=Kb(n,Lb)),e.H||"*"!=t.H&&(n=Kb(n,function(e){return e&&e.tagName==t.rc()})),e.ca||C(t.ca,function(t,e){var i=RegExp("(?:^|\\s)"+t+"(?:\\s|$)");n=Kb(n,function(t){return i.test(t.className)}),n.count=e}),e.Ba||C(t.Ba,function(t){var e=t.name;Yb[e]&&(n=Kb(n,Yb[e](e,t.value)))}),e.Ab||C(t.Ab,function(t){var e,i=t.nc;t.type&&Nb[t.type]?e=Nb[t.type](i,t.yc):i.length&&(e=Zb(i)),e&&(n=Kb(n,e))}),e.id||t.id&&(n=Kb(n,function(e){return!!e&&e.id==t.id})),n||"default"in e||(n=Eb),n}function ac(t){var e=$b[t.Ua];if(e)return e;var n=t.Ad,n=n?n.Qb:"",i=Xb(t,{D:1}),o="*"==t.H,s=document.getElementsByClassName;if(n){if(s={D:1},o&&(s.H=1),i=Xb(t,s),"+"==n)var r=i,e=function(t,e,n){for(;t=t[Pb];)if(!Ob||Lb(t)){(!n||bc(t,n))&&r(t)&&e.push(t);break}return e};else if("~"==n)var a=i,e=function(t,e,n){for(t=t[Pb];t;){if(Rb(t)){if(n&&!bc(t,n))break;a(t)&&e.push(t)}t=t[Pb]}return e};else if(">"==n)var h=i,h=h||Eb,e=function(t,e,n){for(var i=0,o=t[Hb];t=o[i++];)Rb(t)&&(!n||bc(t,n))&&h(t,i)&&e.push(t);return e}}else if(t.id)i=!t.Ed&&o?Eb:Xb(t,{D:1,id:1}),e=function(e,n){var o,s=rb(e).d(t.id);if((o=s&&i(s))&&!(o=9==e.nodeType)){for(o=s.parentNode;o&&o!=e;)o=o.parentNode;o=!!o}if(o)return Fb(s,n)};else if(s&&/\{\s*\[native code\]\s*\}/.test(String(s))&&t.ca.length&&!Gb)var i=Xb(t,{D:1,ca:1,id:1}),c=t.ca.join(" "),e=function(t,e){for(var n,o=Fb(0,e),s=0,r=t.getElementsByClassName(c);n=r[s++];)i(n,t)&&o.push(n);return o};else o||t.Ed?(i=Xb(t,{D:1,H:1,id:1}),e=function(e,n){for(var o,s=Fb(0,n),r=0,a=e.getElementsByTagName(t.rc());o=a[r++];)i(o,e)&&s.push(o);return s}):e=function(e,n){for(var i,o=Fb(0,n),s=0,r=e.getElementsByTagName(t.rc());i=r[s++];)o.push(i);return o};return $b[t.Ua]=e}function ec(t){var e=Jb(ra(t));if(1==e.length){var n=ac(e[0]);return function(t){return(t=n(t,[]))&&(t.Pb=j),t}}return function(t){for(var n,i,o,s,t=Fb(t),r=e.length,a=0;a<r;a++){s=[],n=e[a],i=t.length-1,0<i&&(o={},s.Pb=j),i=ac(n);for(var h=0;n=t[h];h++)i(n,s,o);if(!s.length)break;t=s}return s}}function gc(t,e){if(fc){var n=dc[t];if(n&&!e)return n}if(n=cc[t])return n;var n=t.charAt(0),i=-1==t.indexOf(" ");if(0<=t.indexOf("#")&&i&&(e=j),fc&&!e&&-1==">~+".indexOf(n)&&(!E||-1==t.indexOf(":"))&&!(Gb&&0<=t.indexOf("."))&&-1==t.indexOf(":contains")&&-1==t.indexOf("|=")){var o=0<=">~+".indexOf(t.charAt(t.length-1))?t+" *":t;return dc[t]=function(e){try{9==e.nodeType||i||g("");var n=e.querySelectorAll(o);return E?n.Td=j:n.Pb=j,n}catch(n){return gc(t,j)(e)}}}var s=t.split(/\s*,\s*/);return cc[t]=2>s.length?ec(t):function(t){for(var e,n=0,i=[];e=s[n++];)i=i.concat(ec(e)(t));return i}}function bc(t,e){if(!e)return 1;var n=ic(t);return e[n]?0:e[n]=1}function jc(t){if(t&&t.Pb)return t;var e=[];if(!t||!t.length)return e;if(t[0]&&e.push(t[0]),2>t.length)return e;if(hc++,E&&Ib){var n=hc+"";t[0].setAttribute("_zipIdx",n);for(var i,o=1;i=t[o];o++)t[o].getAttribute("_zipIdx")!=n&&e.push(i),i.setAttribute("_zipIdx",n)}else if(E&&t.Td)try{for(o=1;i=t[o];o++)Lb(i)&&e.push(i)}catch(t){}else for(t[0]&&(t[0]._zipIdx=hc),o=1;i=t[o];o++)t[o]._zipIdx!=hc&&e.push(i),i._zipIdx=hc;return e}function L(t,e){if(!t)return[];if(t.constructor==Array)return t;if(!u(t))return[t];if(u(e)&&(e=u(e)?document.getElementById(e):e,!e))return[];var e=e||document,n=e.ownerDocument||e.documentElement;return Ib=e.contentType&&"application/xml"==e.contentType||Sa&&(e.doctype||"[object XMLDocument]"==n.toString())||!!n&&(E?n.xml:e.xmlVersion||n.xmlVersion),(n=gc(t)(e))&&n.Pb?n:jc(n)}function nc(){0!=oc&&(this.se=Error().stack,ja(this))}function pc(t,e){this.type=t,this.currentTarget=this.target=e}function qc(t){t.preventDefault()}function rc(t){return rc[" "](t),t}function sc(t,e){t&&this.init(t,e)}function uc(t){return(kc?0==t.n.button:"click"==t.type?j:!!(t.n.button&tc[0]))&&!(G&&Na&&t.ctrlKey)}function vc(){}function O(e,n,i,o,s){if(n){if(ga(n)){for(var r=0;r<n.length;r++)O(e,n[r],i,o,s);return m}var o=!!o,a=N;n in a||(a[n]={m:0,O:0}),a=a[n],o in a||(a[o]={m:0,O:0},a.m++);var h,a=a[o],c=ja(e);if(a.O++,a[c]){for(h=a[c],r=0;r<h.length;r++)if(a=h[r],a.Ta==i&&a.Pa==s){if(a.Ca)break;return h[r].key}}else h=a[c]=[],a.m++;var u=Ac,f=lc?function(t){return u.call(f.src,f.key,t)}:function(t){if(t=u.call(f.src,f.key,t),!t)return t},r=f;return r.src=e,a=new vc,a.init(i,r,e,n,o,s),i=a.key,r.key=i,h.push(a),xc[i]=a,yc[c]||(yc[c]=[]),yc[c].push(a),e.addEventListener?(e==t||!e.hd)&&e.addEventListener(n,r,o):e.attachEvent(n in zc?zc[n]:zc[n]="on"+n,r),i}g(Error("Invalid event type"))}function Bc(t,e,n,i,o){if(ga(e))for(var s=0;s<e.length;s++)Bc(t,e[s],n,i,o);else if(i=!!i,t=Cc(t,e,i))for(s=0;s<t.length;s++)if(t[s].Ta==n&&t[s].capture==i&&t[s].Pa==o){P(t[s].key);break}}function P(e){if(!xc[e])return n;var i=xc[e];if(i.Ca)return n;var o=i.src,s=i.type,r=i.Hd,a=i.capture;return o.removeEventListener?(o==t||!o.hd)&&o.removeEventListener(s,r,a):o.detachEvent&&o.detachEvent(s in zc?zc[s]:zc[s]="on"+s,r),o=ja(o),yc[o]&&(r=yc[o],D(r,i),0==r.length&&delete yc[o]),i.Ca=j,(i=N[s][a][o])&&(i.Gd=j,Dc(s,a,o,i)),delete xc[e],j}function Dc(t,e,i,o){if(!o.Kb&&o.Gd){for(var s=0,r=0;s<o.length;s++)o[s].Ca?o[s].Hd.src=m:(s!=r&&(o[r]=o[s]),r++);o.length=r,o.Gd=n,0==r&&(delete N[t][e][i],N[t][e].m--,0==N[t][e].m&&(delete N[t][e],N[t].m--),0==N[t].m&&delete N[t])}}function Cc(t,e,n){var i=N;return e in i&&(i=i[e],n in i&&(i=i[n],t=ja(t),i[t]))?i[t]:m}function Ec(t,e,i,o,s){var r=1,e=ja(e);if(t[e]){t.O--,t=t[e],t.Kb?t.Kb++:t.Kb=1;try{for(var a=t.length,h=0;h<a;h++){var c=t[h];c&&!c.Ca&&(r&=Fc(c,s)!==n)}}finally{t.Kb--,Dc(i,o,e,t)}}return Boolean(r)}function Fc(t,e){return t.fd&&P(t.key),t.handleEvent(e)}function Ac(e,o){if(!xc[e])return j;var s=xc[e],r=s.type,a=N;if(!(r in a))return j;var h,c,a=a[r];if(!lc){var u;if(!(u=o))t:{u=["window","event"];for(var f=t;h=u.shift();){if(f[h]==m){u=m;break t}f=f[h]}u=f}if(h=u,u=j in a,f=n in a,u){if(0>h.keyCode||h.returnValue!=i)return j;t:{var l=n;if(0==h.keyCode)try{h.keyCode=-1;break t}catch(t){l=j}(l||h.returnValue==i)&&(h.returnValue=j)}}l=new sc,l.init(h,this),h=j;try{if(u){for(var d=[],p=l.currentTarget;p;p=p.parentNode)d.push(p);c=a[j],c.O=c.m;for(var b=d.length-1;!l.Aa&&0<=b&&c.O;b--)l.currentTarget=d[b],h&=Ec(c,d[b],r,j,l);if(f)for(c=a[n],c.O=c.m,b=0;!l.Aa&&b<d.length&&c.O;b++)l.currentTarget=d[b],h&=Ec(c,d[b],r,n,l)}else h=Fc(s,l)}finally{d&&(d.length=0)}return h}return r=new sc(o,this),h=Fc(s,r)}function Gc(t){nc.call(this),this.xd=t,this.j=[]}function Q(t,e,i,o,s){ga(i)||(Hc[0]=i,i=Hc);for(var r=0;r<i.length;r++){var a=O(e,i[r],o||t,s||n,t.xd||t);t.j.push(a)}return t}function Ic(t,e,n,i,o,s){if(ga(n))for(var r=0;r<n.length;r++)Ic(t,e,n[r],i,o,s);else{t:{if(i=i||t,s=s||t.xd||t,o=!!o,e=Cc(e,n,o))for(n=0;n<e.length;n++)if(!e[n].Ca&&e[n].Ta==i&&e[n].capture==o&&e[n].Pa==s){e=e[n];break t}e=m}e&&(e=e.key,P(e),D(t.j,e))}return t}function Jc(){nc.call(this)}function Kc(t,e,n,i){this.top=t,this.right=e,this.bottom=n,this.left=i}function Lc(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i}function R(t,e,n){u(e)?Mc(t,n,e):ob(e,pa(Mc,t))}function Mc(t,e,n){t.style[ya(n)]=e}function T(t,e){var n=K(t);return n.defaultView&&n.defaultView.getComputedStyle&&(n=n.defaultView.getComputedStyle(t,m))?n[e]||n.getPropertyValue(e)||"":""}function Nc(t,e){return t.currentStyle?t.currentStyle[e]:m}function Oc(t,e){return T(t,e)||Nc(t,e)||t.style&&t.style[e]}function Pc(t,e,n){var i,o=F&&(Na||Ua)&&I("1.9");e instanceof J?(i=e.x,e=e.y):(i=e,e=n),t.style.left=Qc(i,o),t.style.top=Qc(e,o)}function Rc(t){var e=t.getBoundingClientRect();return E&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e}function Sc(t){if(E&&!db(8))return t.offsetParent;for(var e=K(t),n=Oc(t,"position"),i="fixed"==n||"absolute"==n,t=t.parentNode;t&&t!=e;t=t.parentNode)if(n=Oc(t,"position"),i=i&&"static"==n&&t!=e.documentElement&&t!=e.body,!i&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight||"fixed"==n||"absolute"==n||"relative"==n))return t;return m}function Tc(t){var e,i,o=K(t),s=Oc(t,"position"),r=F&&o.getBoxObjectFor&&!t.getBoundingClientRect&&"absolute"==s&&(e=o.getBoxObjectFor(t))&&(0>e.screenX||0>e.screenY),a=new J(0,0);if(e=o?K(o):document,(i=E)&&(i=!db(9))&&(rb(e),i=n),i=i?e.body:e.documentElement,t==i)return a;if(t.getBoundingClientRect)e=Rc(t),t=Db(rb(o)),a.x=e.left+t.x,a.y=e.top+t.y;else if(o.getBoxObjectFor&&!r)e=o.getBoxObjectFor(t),t=o.getBoxObjectFor(i),a.x=e.screenX-t.screenX,a.y=e.screenY-t.screenY;else{r=t;do{if(a.x+=r.offsetLeft,a.y+=r.offsetTop,r!=t&&(a.x+=r.clientLeft||0,a.y+=r.clientTop||0),G&&"fixed"==Oc(r,"position")){a.x+=o.body.scrollLeft,a.y+=o.body.scrollTop;break}r=r.offsetParent}while(r&&r!=t);for((Sa||G&&"absolute"==s)&&(a.y-=o.body.offsetTop),r=t;(r=Sc(r))&&r!=o.body&&r!=i;)a.x-=r.scrollLeft,Sa&&"TR"==r.tagName||(a.y-=r.scrollTop)}return a}function Uc(t,e){var n=Vc(t),i=Vc(e);return new J(n.x-i.x,n.y-i.y)}function Vc(t){var e=new J;if(1==t.nodeType){if(t.getBoundingClientRect){var n=Rc(t);e.x=n.left,e.y=n.top}else{var n=Db(rb(t)),i=Tc(t);e.x=i.x-n.x,e.y=i.y-n.y}if(F&&!I(12)){var o;E?o="-ms-transform":G?o="-webkit-transform":Sa?o="-o-transform":F&&(o="-moz-transform");var s;o&&(s=Oc(t,o)),s||(s=Oc(t,"transform")),s?(t=s.match(Wc),t=t?new J(parseFloat(t[1]),parseFloat(t[2])):new J(0,0)):t=new J(0,0),e=new J(e.x+t.x,e.y+t.y)}}else o=v(t.Ud),s=t,t.targetTouches?s=t.targetTouches[0]:o&&t.n.targetTouches&&(s=t.n.targetTouches[0]),e.x=s.clientX,e.y=s.clientY;return e}function Xc(t,e,n){e instanceof nb?(n=e.height,e=e.width):n==i&&g(Error("missing height argument")),t.style.width=Qc(e,j),t.style.height=Qc(n,j)}function Qc(t,e){return"number"==typeof t&&(t=(e?Math.round(t):t)+"px"),t}function Yc(t){if("none"!=Oc(t,"display"))return Zc(t);var e=t.style,n=e.display,i=e.visibility,o=e.position;return e.visibility="hidden",e.position="absolute",e.display="inline",t=Zc(t),e.display=n,e.position=o,e.visibility=i,t}function Zc(t){var e=t.offsetWidth,n=t.offsetHeight,i=G&&!e&&!n;return ca(e)&&!i||!t.getBoundingClientRect?new nb(e,n):(t=Rc(t),new nb(t.right-t.left,t.bottom-t.top))}function $c(t){var e=Tc(t),t=Yc(t);return new Lc(e.x,e.y,t.width,t.height)}function U(t,e){var n=t.style;"opacity"in n?n.opacity=e:"MozOpacity"in n?n.MozOpacity=e:"filter"in n&&(n.filter=""===e?"":"alpha(opacity="+100*e+")")}function V(t,e){t.style.display=e?"":"none"}function ad(t){return"rtl"==Oc(t,"direction")}function cd(t,e){if(/^\d+px?$/.test(e))return parseInt(e,10);var n=t.style.left,i=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=e;var o=t.style.pixelLeft;return t.style.left=n,t.runtimeStyle.left=i,o}function dd(t,e){if(E){var n=cd(t,Nc(t,e+"Left")),i=cd(t,Nc(t,e+"Right")),o=cd(t,Nc(t,e+"Top")),s=cd(t,Nc(t,e+"Bottom"));return new Kc(o,i,s,n)}return n=T(t,e+"Left"),i=T(t,e+"Right"),o=T(t,e+"Top"),s=T(t,e+"Bottom"),new Kc(parseFloat(o),parseFloat(i),parseFloat(s),parseFloat(n))}function fd(t,e){if("none"==Nc(t,e+"Style"))return 0;var n=Nc(t,e+"Width");return n in ed?ed[n]:cd(t,n)}function gd(t){if(E){var e=fd(t,"borderLeft"),n=fd(t,"borderRight"),i=fd(t,"borderTop"),t=fd(t,"borderBottom");return new Kc(i,n,t,e)}return e=T(t,"borderLeftWidth"),n=T(t,"borderRightWidth"),i=T(t,"borderTopWidth"),t=T(t,"borderBottomWidth"),new Kc(parseFloat(i),parseFloat(n),parseFloat(t),parseFloat(e))}function hd(t,e,i){nc.call(this),this.target=t,this.handle=e||t,this.wc=i||new Lc(NaN,NaN,NaN,NaN),this.M=K(t),this.ka=new Gc(this),O(this.handle,["touchstart","mousedown"],this.le,n,this)}function jd(t){return ca(t.ra)||(t.ra=ad(t.target)),t.ra}function kd(t){var e=t.type;"touchstart"==e||"touchmove"==e?t.init(t.n.targetTouches[0],t.currentTarget):("touchend"==e||"touchcancel"==e)&&t.init(t.n.changedTouches[0],t.currentTarget)}function od(t,e,n){var i=Db(rb(t.M)),e=e+(i.x-t.Ac.x),n=n+(i.y-t.Ac.y);return t.Ac=i,t.Ka+=e,t.La+=n,e=md(t,t.Ka),t=nd(t,t.La),new J(e,t)}function pd(t,e,n,i){t.kd(n,i),t.dispatchEvent(new ld("drag",t,e.clientX,e.clientY,e,n,i))}function md(t,e){var n=t.wc,i=isNaN(n.left)?m:n.left,n=isNaN(n.width)?0:n.width;return Math.min(i!=m?i+n:1/0,Math.max(i!=m?i:-(1/0),e))}function nd(t,e){var n=t.wc,i=isNaN(n.top)?m:n.top,n=isNaN(n.height)?0:n.height;return Math.min(i!=m?i+n:1/0,Math.max(i!=m?i:-(1/0),e))}function ld(t,e,n,i,o,s,r,a){pc.call(this,t),this.clientX=n,this.clientY=i,this.qe=o,this.left=ca(s)?s:e.Ka,this.top=ca(r)?r:e.La,this.ue=e,this.te=!!a}function qd(t){for(var e=0,n=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:n,left:e}}function rd(){this.Za=[]}function sd(t,e){this.Y={},this.j=[];var n=arguments.length;if(1<n){n%2&&g(Error("Uneven number of arguments"));for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t){var o;if(t instanceof sd)td(t),o=t.j.concat(),i=W(t);else{var n=[],s=0;for(o in t)n[s++]=o;o=n,n=[],s=0;for(i in t)n[s++]=t[i];i=n}for(n=0;n<o.length;n++)this.set(o[n],i[n])}}function W(t){td(t);for(var e=[],n=0;n<t.j.length;n++)e.push(t.Y[t.j[n]]);return e}function td(t){if(t.m!=t.j.length){for(var e=0,n=0;e<t.j.length;){var i=t.j[e];ud(t.Y,i)&&(t.j[n++]=i),e++}t.j.length=n}if(t.m!=t.j.length){for(var o={},n=e=0;e<t.j.length;)i=t.j[e],ud(o,i)||(t.j[n++]=i,o[i]=1),e++;t.j.length=n}}function ud(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vd(t,e){this.x=t,this.y=e}function wd(t){this.points=t}function xd(t){for(var e=0,n=t.length-1,i=0;i<t.length;i++)e+=(t[n].x+t[i].x)*(t[n].y-t[i].y),n=i;return e/2}function yd(t,e){for(var n,i,o=n=0,s=t.length-1,r=0;r<t.length;r++)i=t[r].x*t[s].y-t[s].x*t[r].y,n+=(t[r].x+t[s].x)*i,o+=(t[r].y+t[s].y)*i,s=r;for(i=6*xd(t),n=new vd(Math.abs(n/i),Math.abs(o/i)),o=[],i=0;i<t.length;i++){var s=t[i],a=(0>xd(t)?-1:1)*e,r=s.x-n.x,h=s.y-n.y,c=0<a?1:0>a?-1:0,a=Math.sqrt(Math.pow(a,2)/(1+Math.pow(r/h,2)));o.push({x:s.x+Math.abs(r/h*a)*(0<r?1:0>r?-1:0)*c,y:s.y+Math.abs(a)*(0<h?1:0>h?-1:0)*c})}return o}function zd(t,e,n,i){0<n?(this.x=t,this.width=n):(this.x=t+n,this.width=-n),0<i?(this.y=e,this.height=i):(this.y=e+i,this.height=-i)}function Ad(t,e,n,i){this.type=t,this.geometry=e,n&&(this.units=n),this.style=i?i:{}}function Bd(t){return"rect"==t.type?t.geometry.width*t.geometry.height:"polygon"==t.type?Math.abs(xd(t.geometry.points)):0}function Cd(t){if("rect"==t.type)return t;if("polygon"==t.type){for(var e=t.geometry.points,i=e[0].x,o=e[0].x,s=e[0].y,r=e[0].y,a=1;a<e.length;a++)e[a].x>o&&(o=e[a].x),e[a].x<i&&(i=e[a].x),e[a].y>r&&(r=e[a].y),e[a].y<s&&(s=e[a].y);return new Ad("rect",new zd(i,s,o-i,r-s),n,t.style)}}function Dd(t,e){var i;i=t.geometry.points;var o=0>xd(i)?-1:1;if(4>i.length)i=yd(i,o*e);else{for(var s=i.length-1,r=1,a=[],h=0;h<i.length;h++)s=yd([i[s],i[h],i[r]],o*e),a.push(s[1]),s=h,r++,r>i.length-1&&(r=0);i=a}return new Ad("polygon",new wd(i),n,t.style)}function Ed(t,e){if("rect"==t.type){var i=e(t.geometry);return new Ad("rect",i,n,t.style)}if("polygon"==t.type){var o=[];return C(t.geometry.points,function(t){o.push(e(t))}),new Ad("polygon",new wd(o),n,t.style)}}function Fd(t){return JSON.stringify(t.geometry)}function Gd(t,e,n){this.src=t,this.text=e,this.shapes=[n],this.context=document.URL}function Hd(){}function Id(t,e){t.g=new sd,t.Uc=[],t.bb=[],t.Ha=[],t.Fa=[],t.$b=[],t.ub={Ra:n,Qa:n},t.Ga=new sd,t.bc=i,t.bd=e}function Jd(t,e){var i=t.Ga.get(e);return i||(i={Ra:n,Qa:n},t.Ga.set(e,i)),i}function Kd(t,e){var n=t.Fb(e);if(!t.g.get(n)){var i=t.zc(e),o=[],s=[];C(t.Uc,function(t){i.addHandler(t.type,t.Pa)}),C(t.bb,function(t){t.onInitAnnotator&&t.onInitAnnotator(i)}),C(t.Fa,function(t){t.src==n&&(i.J(t),o.push(t))}),C(t.$b,function(t){t.src==n&&(i.A(t),s.push(t))}),C(o,function(e){D(t.Fa,e)}),C(s,function(e){D(t.$b,e)});var r=t.Ga.get(n);r?(r.Ra&&i.N(),r.Qa&&i.ea(),t.Ga.remove(n)):(t.ub.Ra&&i.N(),t.ub.Qa&&i.ea()),t.bc&&i.ga(t.bc),t.g.set(n,i),D(t.Ha,e)}}function Ld(t){var e,n;for(n=t.Ha.length;0<n;n--){for(var i=e=t.Ha[n-1],o=i.offsetTop,s=i.offsetLeft,r=i.offsetWidth,a=i.offsetHeight;i.offsetParent;)i=i.offsetParent,o+=i.offsetTop,s+=i.offsetLeft;o<window.pageYOffset+window.innerHeight&&s<window.pageXOffset+window.innerWidth&&o+a>window.pageYOffset&&s+r>window.pageXOffset&&Kd(t,e)}}function Md(t,e,n){if(e){var i=t.g.get(e);i?n?i.Da():i.ea():Jd(t,e).Qa=n}else C(W(t.g),function(t){n?t.Da():t.ea()}),t.ub.Qa=!n,C(W(t.Ga),function(t){t.Qa=!n})}function Nd(t,e,n){if(e){var i=t.g.get(e);i?n?i.Z():i.N():Jd(t,e).Ra=n}else C(W(t.g),function(t){n?t.Z():t.N()}),t.ub.Ra=!n,C(W(t.Ga),function(t){t.Ra=!n})}function Od(t,e){return ud(t.g.Y,e)?j:Da(t.Ha,function(n){return t.Fb(n)==e})!=m}function Pd(t,e){var n=rb().createElement("DIV");if(n.innerHTML=t(e||Qd,i,i),1==n.childNodes.length){var o=n.firstChild;if(1==o.nodeType)return o}return n}function Rd(t,e){t!=m&&this.append.apply(this,arguments)}function Sd(){}function he(){}function ie(t,e,i){this.ha=t,this.Q=[],this.oa=n,this.Od=e,this.Ob=i}function ge(t,e){t.oa||t.ha.append(e)}function ke(t,e,i,o,s){if(!(E||G&&I("525")))return j;if(Na&&s)return le(t);if(s&&!o||!i&&(17==e||18==e)||E&&o&&e==t)return n;switch(t){case 13:return!(E&&db(9));case 27:return!G}return le(t)}function le(t){if(48<=t&&57>=t||96<=t&&106>=t||65<=t&&90>=t||G&&0==t)return j;switch(t){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return n}}function me(t){switch(t){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return t}}function ne(t,e){nc.call(this),t&&oe(this,t,e)}function oe(t,e,n){t.Jb&&t.detach(),t.F=e,t.Ib=O(t.F,"keypress",t,n),t.uc=O(t.F,"keydown",t.Wd,n,t),t.Jb=O(t.F,"keyup",t.Yd,n,t)}function te(t,e,n,o){o&&this.init(o,i),this.type="key",this.keyCode=t,this.charCode=e,this.repeat=n}function ue(){}function ve(t){nc.call(this),this.kb=t||rb(),this.ra=we}function xe(t,e){switch(t){case 1:return e?"disable":"enable";case 2:return e?"highlight":"unhighlight";case 4:return e?"activate":"deactivate";case 8:return e?"select":"unselect";case 16:return e?"check":"uncheck";case 32:return e?"focus":"blur";case 64:return e?"open":"close"}g(Error("Invalid component state"))}function ye(){}function Ae(t,e){var n=[];return e&&(t=t.concat([e])),C([],function(i){Ca(i,pa(Ea,t))&&(!e||Ea(i,e))&&n.push(i.join("_"))}),n}function Be(t){var e=t.ob();t.Bb={1:e+"-disabled",2:e+"-hover",4:e+"-active",8:e+"-selected",16:e+"-checked",32:e+"-focused",64:e+"-open"}}function De(t,e,n){if(ve.call(this,n),!e){for(var i,e=this.constructor;e&&(i=ja(e),!(i=Ce[i]));)e=e.K?e.K.constructor:m;e=i?v(i.pb)?i.pb():new i:m}this.G=e,this.ib=t}function Ee(t){t.fa&&n!=t.tc&&Fe(t,n),t.tc=n}function Fe(t,e){var n=t.Eb(),i=t.d();e?(Q(Q(Q(Q(n,i,"mouseover",t.vd),i,"mousedown",t.sd),i,"mouseup",t.wd),i,"mouseout",t.ud),t.Gb!=da&&Q(n,i,"contextmenu",t.Gb),E&&Q(n,i,"dblclick",t.rd)):(Ic(Ic(Ic(Ic(n,i,"mouseover",t.vd),i,"mousedown",t.sd),i,"mouseup",t.wd),i,"mouseout",t.ud),t.Gb!=da&&Ic(n,i,"contextmenu",t.Gb),E&&Ic(n,i,"dblclick",t.rd))}function Ge(t,e){He(t,2,e)&&t.P(2,e)}function X(t,e){return!!(t.oc&e)&&!!(t.V&e)}function He(t,e,n){return!!(t.V&e)&&!!(t.r&e)!=n&&(!(t.me&e)||t.dispatchEvent(xe(e,n)))&&!t.ld}function Ie(t,e){if(X(t,16)){var n=!(16&t.r);He(t,16,n)&&t.P(16,n)}return X(t,8)&&He(t,8,j)&&t.P(8,j),X(t,64)&&(n=!(64&t.r),He(t,64,n)&&t.P(64,n)),n=new pc("action",t),e&&(n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.Cc=e.Cc),t.dispatchEvent(n)}function Ke(){return new De(m)}function Le(){}function Ne(t,e,n){De.call(this,t,e||Le.pb(),n),Ee(this),this.Vb(j),t||(this.ib="")}function Pe(t){return t.rb.top+t.rb.bottom+t.ed.top+t.ed.bottom}function Qe(t){var e=t.Fd,n=t.d();return e&&n&&t.Nb&&(e-=Pe(t)),e}function Re(t){var e=t.ce,n=t.d();return e&&n&&t.Nb&&(e-=Pe(t)),e}function Se(t){if(!t.yd){var e=t.d().cloneNode(n);R(e,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"}),t.pd().M.body.appendChild(e);var i=e.scrollHeight;e.style.padding="10px";var o=e.scrollHeight;t.Ec=o>i,e.style.borderWidth="10px",t.Dc=e.scrollHeight>o,e.style.height="100px",100!=e.offsetHeight&&(t.Nb=j),zb(e),t.yd=j}var e=t.d(),i=t.d().scrollHeight,s=t.d(),o=s.offsetHeight-s.clientHeight;if(!t.Ec)var r=t.rb,o=o-(r.top+r.bottom);return t.Dc||(s=gd(s),o-=s.top+s.bottom),i+=0<o?o:0,t.Nb?i-=Pe(t):(t.Ec||(o=t.rb,i+=o.top+o.bottom),t.Dc||(t=gd(e),i+=t.top+t.bottom)),i}function Te(t,e){t.na!=e&&(t.na=e,t.d().style.height=e+"px")}function Ue(t){t=t.d(),t.style.height="auto";var e=t.value.match(/\n/g)||[];t.rows=e.length+1}function Ve(t){return"object"==typeof t&&t&&0===t.re?t.content:String(t).replace(We,Xe)}function Xe(t){return Ye[t]}function Ze(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Editar" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Remover" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}function $e(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Adicionar comentário..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Salvar</a><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancelar</a></div></form></div>'}function af(t){function e(){var t=o.Ia;t.d()&&t.Oa()}this.element=Pd($e),this.e=t,this.Rd=t.getItem(),this.Ia=new Ne(""),this.Pd=L(".annotorious-editor-button-cancel",this.element)[0],this.Tc=L(".annotorious-editor-button-save",this.element)[0];var i;i=this.Tc,gb?i=i.parentElement:(i=i.parentNode,i=Ab(i)?i:m),this.Qd=i,this.Ya=[];var o=this;O(this.Pd,"click",function(e){e.preventDefault(),t.stopSelection(o.$c),o.close()}),O(this.Tc,"click",function(e){e.preventDefault(),e=o.od(),t.J(e),t.stopSelection(),o.$c?t.fireEvent("onAnnotationUpdated",e,t.getItem()):t.fireEvent("onAnnotationCreated",e,t.getItem()),o.close()}),V(this.element,n),t.element.appendChild(this.element),this.Ia.jb(L(".annotorious-editor-text",this.element)[0]);var s=this.element;i=document.createElement("div"),R(i,"position","absolute"),R(i,"top","0px"),R(i,"right","0px"),R(i,"width","5px"),R(i,"height","100%"),R(i,"cursor","e-resize"),s.appendChild(i);var r=gd(s),r=$c(s).width-r.right-r.left;i=new hd(i),i.wc=new Lc(r,0,800,0)||new Lc(NaN,NaN,NaN,NaN),i.kd=function(t){R(s,"width",t+"px"),e&&e()}}function bf(t,e,n){var i=this;n||(n="Clique e arraste para fazer uma anotação"),this.element=Pd(cf,{Mb:n}),this.e=t,this.Xc=L(".annotorious-hint-msg",this.element)[0],this.Vc=L(".annotorious-hint-icon",this.element)[0],this.ic=function(){i.show()},this.hc=function(){df(i)},this.Zb(),df(this),e.appendChild(this.element)}function df(t){window.clearTimeout(t.ec),
U(t.Xc,0)}function ef(t){this.element=Pd(Ze),this.e=t,this.Sd=L(".annotorious-popup-text",this.element)[0],this.R=L(".annotorious-popup-buttons",this.element)[0],this.cc=n,this.Ya=[];var e=L(".annotorious-popup-button-edit",this.R)[0],i=L(".annotorious-popup-button-delete",this.R)[0],o=this;O(e,"mouseover",function(){ib(e,"annotorious-popup-button-active")}),O(e,"mouseout",function(){kb(e,"annotorious-popup-button-active")}),O(e,"click",function(){U(o.element,0),R(o.element,"pointer-events","none"),t.pc(o.f)}),O(i,"mouseover",function(){ib(i,"annotorious-popup-button-active")}),O(i,"mouseout",function(){kb(i,"annotorious-popup-button-active")}),O(i,"click",function(){t.fireEvent("beforeAnnotationRemoved",o.f)||(U(o.element,0),R(o.element,"pointer-events","none"),t.A(o.f),t.fireEvent("onAnnotationRemoved",o.f))}),ff&&(O(this.element,"mouseover",function(){window.clearTimeout(o.ac),.9>(o.R.style[ya("opacity")]||"")&&U(o.R,.9),o.clearHideTimer()}),O(this.element,"mouseout",function(){U(o.R,0),o.startHideTimer()}),t.addHandler("onMouseOutOfItem",function(){o.startHideTimer()})),U(this.R,0),U(this.element,0),R(this.element,"pointer-events","none"),t.element.appendChild(this.element)}function gf(){}function hf(t,e){O(e,jf,function(i){console.log("start selection event"),console.log(i),i=kf(i,e),t.h.o(n),t.yb?(V(t.c,j),t.v.startSelection(i.x,i.y)):(i=t.h.mb(i.x,i.y),0<i.length&&t.h.o(i[0]))})}function lf(t,e){this.W=t,this.e=e,this.Ea=[],this.aa=[],this.ua=this.W.getContext("2d"),this.ta=j,this.xb=n;var o=this;O(this.W,mf,function(t){if(o.ta){var e=nf(o,t.offsetX,t.offsetY);e?(o.xb=o.xb&&e==o.f,o.f?o.f!=e&&(o.ta=n,o.e.popup.startHideTimer()):(o.f=e,of(o),o.e.fireEvent("onMouseOverAnnotation",{C:o.f,mouseEvent:t}))):!o.xb&&o.f&&(o.ta=n,o.e.popup.startHideTimer())}else o.Xa=t}),O(this.W,jf,function(){o.f!==i&&o.f!=n&&o.e.fireEvent("onAnnotationClicked",o.f)}),e.addHandler("onMouseOutOfItem",function(){delete o.f,o.ta=j}),e.addHandler("beforePopupHide",function(){if(!o.ta&&o.Xa){var t=o.f;o.f=nf(o,o.Xa.offsetX,o.Xa.offsetY),o.ta=j,t!=o.f?(of(o),o.e.fireEvent("onMouseOutOfAnnotation",{C:t,mouseEvent:o.Xa}),o.e.fireEvent("onMouseOverAnnotation",{C:o.f,mouseEvent:o.Xa})):o.f&&o.e.popup.clearHideTimer()}else of(o)})}function nf(t,e,n){if(t=t.mb(e,n),0<t.length)return t[0]}function pf(t,e,n){var i=Da(t.e.ma(),function(t){return t.getSupportedShapeType()==e.type});i?i.drawShape(t.ua,e,n):console.log("WARNING unsupported shape type: "+e.type)}function of(t){if(t.ua.clearRect(0,0,t.W.width,t.W.height),C(t.Ea,function(e){e!=t.f&&pf(t,t.aa[Fd(e.shapes[0])])}),t.f){var e=t.aa[Fd(t.f.shapes[0])];pf(t,e,j),e=Cd(e).geometry,t.e.popup.show(t.f,new vd(e.x,e.y+e.height+5))}}function kf(t,e){var i=n;return t.offsetX=t.offsetX?t.offsetX:n,t.offsetY=t.offsetY?t.offsetY:n,i=t.offsetX&&t.offsetY||!t.n.changedTouches?{x:t.offsetX,y:t.offsetY}:{x:t.n.changedTouches[0].clientX-qd(e).left,y:t.n.changedTouches[0].clientY-qd(e).top}}function uf(){}function vf(t){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Ve(t.width)+"px; height:"+Ve(t.height)+'px; z-index:0" width="'+Ve(t.width)+'" height="'+Ve(t.height)+'"></canvas>'}function cf(t){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+Ve(t.Mb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'}function wf(t,e){function i(e,n){R(o,"margin-"+e,n+"px"),R(t,"margin-"+e,0),R(t,"padding-"+e,0)}this.$=t,this.ad={padding:t.style.padding,margin:t.style.margin},this.w=new rd,this.ia=[],this.yb=j,this.element=wb("div","annotorious-annotationlayer"),R(this.element,"position","relative"),R(this.element,"display","inline-block");var o=this.element,s=dd(t,"margin"),r=dd(t,"padding");(0!=s.top||0!=r.top)&&i("top",s.top+r.top),(0!=s.right||0!=r.right)&&i("right",s.right+r.right),(0!=s.bottom||0!=r.bottom)&&i("bottom",s.bottom+r.bottom),(0!=s.left||0!=r.left)&&i("left",s.left+r.left),(s=t.parentNode)&&s.replaceChild(this.element,t),this.element.appendChild(t),s=$c(t),this.ja=Pd(vf,{width:s.width,height:s.height}),ff&&ib(this.ja,"annotorious-item-unfocus"),this.element.appendChild(this.ja),this.c=Pd(vf,{width:s.width,height:s.height}),ff&&V(this.c,n),this.element.appendChild(this.c),this.popup=e?e:new ef(this),s=new uf,s.init(this,this.c),this.ia.push(s),this.v=s,this.editor=new af(this),this.h=new lf(this.ja,this),this.$a=new bf(this,this.element);var a=this;ff&&(O(this.element,rf,function(t){t=t.relatedTarget,t&&Bb(a.element,t)||(a.w.fireEvent("onMouseOverItem"),mb(a.ja,"annotorious-item-unfocus","annotorious-item-focus"))}),O(this.element,tf,function(t){t=t.relatedTarget,t&&Bb(a.element,t)||(a.w.fireEvent("onMouseOutOfItem"),mb(a.ja,"annotorious-item-focus","annotorious-item-unfocus"))})),hf(this,qf?this.c:this.ja),this.w.addHandler("onSelectionCompleted",function(t){var e=t.viewportBounds;a.editor.setPosition(new vd(e.left+a.$.offsetLeft,e.bottom+4+a.$.offsetTop)),a.editor.open(n,t)}),this.w.addHandler("onSelectionCanceled",function(){ff&&V(a.c,n),a.v.stopSelection()})}function xf(t){var e=t.getAttribute("data-original");return e?e:t.src}function yf(){Id(this,function(){return L("img.annotatable",document)})}function zf(t){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+Ve(t.Mb)+"</dvi></div>"}function Af(t,e){this.X=t,this.S=$c(e.element),this.k=e.popup,R(this.k.element,"z-index",99e3),this.z=[],this.tb=new OpenLayers.Layer.Boxes("Annotorious"),this.X.addLayer(this.tb);var n=this;this.X.events.register("move",this.X,function(){n.I&&n.ab()}),e.addHandler("beforePopupHide",function(){n.va==n.I?n.k.clearHideTimer():n.fb(n.va,n.I)})}function Bf(t){function e(){var t=parseInt(T(s.element,"width"),10),e=parseInt(T(s.element,"height"),10);Xc(s.c,t,e),s.c.width=t,s.c.height=e}this.X=t,this.element=t.div;var o=this.element.style[ya("position")]||"";"absolute"!=o&&"relative"!=o&&R(this.element,"position","relative"),this.w=new rd,this.U=Pd(zf,{Mb:"Click and Drag"}),R(this.U,"z-index",9998),U(this.U,0),this.element.appendChild(this.U),this.popup=new ef(this),this.h=new Af(t,this),this.c=Pd(vf,{width:"0",height:"0"}),V(this.c,n),R(this.c,"position","absolute"),R(this.c,"top","0px"),R(this.c,"z-index",9999),this.element.appendChild(this.c);var s=this;e(),this.v=new uf,this.v.init(this,this.c),this.eb=i,this.editor=new af(this),R(this.editor.element,"z-index",1e4),window.addEventListener?window.addEventListener("resize",e,n):window.attachEvent&&window.attachEvent("onresize",e),O(this.element,"mouseover",function(t){t=t.relatedTarget,(!t||!Bb(s.element,t))&&s.w.fireEvent("onMouseOverItem")}),O(this.element,"mouseout",function(t){t=t.relatedTarget,(!t||!Bb(s.element,t))&&s.w.fireEvent("onMouseOutOfItem")}),O(this.c,"mousedown",function(t){var e=Vc(s.element);s.v.startSelection(t.clientX-e.x,t.clientY-e.y)}),this.w.addHandler("onSelectionCompleted",function(t){R(s.c,"pointer-events","none"),t=t.viewportBounds,s.editor.setPosition(new vd(t.left,t.bottom+4)),s.editor.open()}),this.w.addHandler("onSelectionCanceled",function(){s.stopSelection()})}function Cf(){Id(this)}function Df(t,e){this.T=t,this.S=$c(t.element),this.k=e.popup,R(this.k.element,"z-index",99e3),this.z=[];var n=this;this.T.addHandler("animation",function(){n.I&&n.ab()}),e.addHandler("beforePopupHide",function(){n.va==n.I?n.k.clearHideTimer():n.fb(n.va,n.I)})}function Ef(t){this.element=t.element;var e=document;e.querySelectorAll&&e.querySelector?e=e.querySelector(".openseadragon-container"):(e=document,e=(e.querySelectorAll&&e.querySelector?e.querySelectorAll(".openseadragon-container"):e.getElementsByClassName?e.getElementsByClassName("openseadragon-container"):tb())[0]),R(e||m,"z-index",0),this.T=t,this.w=new rd,this.ia=[],this.yb=j,this.U=Pd(zf,{Mb:"Click and Drag"}),U(this.U,0),this.element.appendChild(this.U),this.popup=new ef(this),this.h=new Df(t,this),this.c=Pd(vf,{width:"0",height:"0"}),V(this.c,n),this.element.appendChild(this.c);var i=this,t=parseInt(T(i.element,"width"),10),e=parseInt(T(i.element,"height"),10);Xc(i.c,t,e),i.c.width=t,i.c.height=e,t=new uf,t.init(this,this.c),this.ia.push(t),this.v=t,this.editor=new af(this),hf(this,this.c),this.w.addHandler("onSelectionCompleted",function(t){t=t.viewportBounds,i.editor.setPosition(new vd(t.left,t.bottom+4)),i.editor.open()}),this.w.addHandler("onSelectionCanceled",function(){i.stopSelection()})}function Ff(){Id(this)}function Y(){function t(){Gf(e)}this.Wc=n,this.l=[new yf],window.OpenLayers&&this.l.push(new Cf),window.OpenSeadragon&&this.l.push(new Ff),this.bb=[];var e=this;window.addEventListener?window.addEventListener("load",t,n):window.attachEvent&&window.attachEvent("onload",t)}function Gf(t){t.Wc||(C(t.l,function(t){t.init()}),C(t.bb,function(e){e.initPlugin&&e.initPlugin(t),C(t.l,function(t){t.zb(e)})}),t.Wc=j)}function Z(t,e){return Da(t.l,function(t){return Od(t,e)})}var i=void 0,j=!0,m=null,n=!1,s,t=this,ka="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),la=0,qa=Date.now||function(){return+new Date},ua=/&/g,va=/</g,wa=/>/g,xa=/\"/g,ta=/[&<>\"]/,B=Array.prototype,za=B.indexOf?function(t,e,n){return B.indexOf.call(t,e,n)}:function(t,e,n){if(n=n==m?0:0>n?Math.max(0,t.length+n):n,u(t))return u(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},C=B.forEach?function(t,e,n){B.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=u(t)?t.split(""):t,s=0;s<i;s++)s in o&&e.call(n,o[s],s,t)},Aa=B.filter?function(t,e,n){return B.filter.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=[],s=0,r=u(t)?t.split(""):t,a=0;a<i;a++)if(a in r){var h=r[a];e.call(n,h,a,t)&&(o[s++]=h)}return o},Ba=B.map?function(t,e,n){return B.map.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=Array(i),s=u(t)?t.split(""):t,r=0;r<i;r++)r in s&&(o[r]=e.call(n,s[r],r,t));return o},Ca=B.every?function(t,e,n){return B.every.call(t,e,n)}:function(t,e,i){for(var o=t.length,s=u(t)?t.split(""):t,r=0;r<o;r++)if(r in s&&!e.call(i,s[r],r,t))return n;return j},Ja,Ka,La,Ma,Na;Ma=La=Ka=Ja=n;var Qa;if(Qa=Oa()){var Ra=Pa();Ja=0==Qa.indexOf("Opera"),Ka=!Ja&&-1!=Qa.indexOf("MSIE"),La=!Ja&&-1!=Qa.indexOf("WebKit"),Ma=!Ja&&!La&&"Gecko"==Ra.product}var Sa=Ja,E=Ka,F=Ma,G=La,Ta=Pa();Na=-1!=(Ta&&Ta.platform||"").indexOf("Mac");var Ua=!!Pa()&&-1!=(Pa().appVersion||"").indexOf("X11"),Va;t:{var Wa="",Xa;if(Sa&&t.opera)var Ya=t.opera.version,Wa="function"==typeof Ya?Ya():Ya;else if(F?Xa=/rv\:([^\);]+)(\)|;)/:E?Xa=/MSIE\s+([^\);]+)(\)|;)/:G&&(Xa=/WebKit\/(\S+)/),Xa)var Za=Xa.exec(Oa()),Wa=Za?Za[1]:"";if(E){var $a,ab=t.document;if($a=ab?ab.documentMode:i,$a>parseFloat(Wa)){Va=String($a);break t}}Va=Wa}var bb={},cb={},eb,fb=!E||db(9);!F&&!E||E&&db(9)||F&&I("1.9.1"),E&&I("9");var gb=E||Sa||G;nb.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},nb.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var pb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),vb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};s=sb.prototype,s.pd=rb,s.d=function(t){return u(t)?this.M.getElementById(t):t},s.ga=ub,s.createElement=function(t){return this.M.createElement(t)},s.createTextNode=function(t){return this.M.createTextNode(t)},s.appendChild=function(t,e){t.appendChild(e)},s.append=function(t,e){xb(K(t),t,arguments,1)},s.contains=Bb;var Eb;Eb=aa(j);var Gb=G&&"BackCompat"==document.compatMode,Hb=document.firstChild.children?"children":"childNodes",Ib=n,Nb={"*=":function(t,e){return function(n){return 0<=Mb(n,t).indexOf(e)}},"^=":function(t,e){return function(n){return 0==Mb(n,t).indexOf(e)}},"$=":function(t,e){return function(n){return n=" "+Mb(n,t),n.lastIndexOf(e)==n.length-e.length}},"~=":function(t,e){var n=" "+e+" ";return function(e){return 0<=(" "+Mb(e,t)+" ").indexOf(n)}},"|=":function(t,e){return e=" "+e,function(n){return n=" "+Mb(n,t),n==e||0==n.indexOf(e+"-")}},"=":function(t,e){return function(n){return Mb(n,t)==e}}},Ob="undefined"==typeof document.firstChild.nextElementSibling,Pb=Ob?"nextSibling":"nextElementSibling",Qb=Ob?"previousSibling":"previousElementSibling",Rb=Ob?Lb:Eb,Yb={checked:function(){return function(t){return t.checked||t.attributes.checked}},"first-child":function(){return Sb},"last-child":function(){return Tb},"only-child":function(){return function(t){return Sb(t)&&Tb(t)?j:n}},empty:function(){return function(t){for(var e=t.childNodes,t=t.childNodes.length-1;0<=t;t--){var i=e[t].nodeType;if(1===i||3==i)return n}return j}},contains:function(t,e){var n=e.charAt(0);return'"'!=n&&"'"!=n||(e=e.slice(1,-1)),function(t){return 0<=t.innerHTML.indexOf(e)}},not:function(t,e){var n=Jb(e)[0],i={D:1};"*"!=n.H&&(i.H=1),n.ca.length||(i.ca=1);var o=Xb(n,i);return function(t){return!o(t)}},"nth-child":function(t,e){if("odd"==e)return Wb;if("even"==e)return Vb;if(-1!=e.indexOf("n")){var n=e.split("n",2),i=n[0]?"-"==n[0]?-1:parseInt(n[0],10):1,o=n[1]?parseInt(n[1],10):0,s=0,r=-1;if(0<i?0>o?o=o%i&&i+o%i:0<o&&(o>=i&&(s=o-o%i),o%=i):0>i&&(i*=-1,0<o&&(r=o,o%=i)),0<i)return function(t){return t=Ub(t),t>=s&&(0>r||t<=r)&&t%i==o};e=o}var a=parseInt(e,10);return function(t){return Ub(t)==a}}},Zb=E?function(t){var e=t.toLowerCase();return"class"==e&&(t="className"),function(n){return Ib?n.getAttribute(t):n[t]||n[e]}}:function(t){return function(e){return e&&e.getAttribute&&e.hasAttribute(t)}},$b={},cc={},dc={},fc=!!document.querySelectorAll&&(!G||I("526")),hc=0,ic=E?function(t){return Ib?t.getAttribute("_uid")||t.setAttribute("_uid",++hc)||hc:t.uniqueID}:function(t){return t._uid||(t._uid=++hc)};L.Ba=Yb,ba("goog.dom.query",L),ba("goog.dom.query.pseudos",L.Ba);var kc=!E||db(9),lc=!E||db(9),mc=E&&!I("9");!G||I("528"),F&&I("1.9b")||E&&I("8")||Sa&&I("9.5")||G&&I("528"),F&&!I("8")||E&&I("9");var oc=0;nc.prototype.ld=n,s=pc.prototype,s.Aa=n,s.defaultPrevented=n,s.Ub=j,s.stopPropagation=function(){this.Aa=j},s.preventDefault=function(){this.defaultPrevented=j,this.Ub=n},rc[" "]=da,z(sc,pc);var tc=[1,4,2];s=sc.prototype,s.target=m,s.relatedTarget=m,s.offsetX=0,s.offsetY=0,s.clientX=0,s.clientY=0,s.screenX=0,s.screenY=0,s.button=0,s.keyCode=0,s.charCode=0,s.ctrlKey=n,s.altKey=n,s.shiftKey=n,s.metaKey=n,s.Cc=n,s.n=m,s.init=function(t,e){var o=this.type=t.type;pc.call(this,o),this.target=t.target||t.srcElement,this.currentTarget=e;var s=t.relatedTarget;if(s){if(F){var r;t:{try{rc(s.nodeName),r=j;break t}catch(t){}r=n}r||(s=m)}}else"mouseover"==o?s=t.fromElement:"mouseout"==o&&(s=t.toElement);this.relatedTarget=s,this.offsetX=G||t.offsetX!==i?t.offsetX:t.layerX,this.offsetY=G||t.offsetY!==i?t.offsetY:t.layerY,this.clientX=t.clientX!==i?t.clientX:t.pageX,this.clientY=t.clientY!==i?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0,this.button=t.button,this.keyCode=t.keyCode||0,this.charCode=t.charCode||("keypress"==o?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.Cc=Na?t.metaKey:t.ctrlKey,this.state=t.state,this.n=t,t.defaultPrevented&&this.preventDefault(),delete this.Aa},s.stopPropagation=function(){sc.K.stopPropagation.call(this),this.n.stopPropagation?this.n.stopPropagation():this.n.cancelBubble=j},s.preventDefault=function(){sc.K.preventDefault.call(this);var t=this.n;if(t.preventDefault)t.preventDefault();else if(t.returnValue=n,mc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},s.Ud=r("n");var wc=0;s=vc.prototype,s.key=0,s.Ca=n,s.fd=n,s.init=function(t,e,i,o,s,r){v(t)?this.Dd=j:t&&t.handleEvent&&v(t.handleEvent)?this.Dd=n:g(Error("Invalid listener argument")),this.Ta=t,this.Hd=e,this.src=i,this.type=o,this.capture=!!s,this.Pa=r,this.fd=n,this.key=++wc,this.Ca=n},s.handleEvent=function(t){return this.Dd?this.Ta.call(this.Pa||this.src,t):this.Ta.handleEvent.call(this.Ta,t)};var xc={},N={},yc={},zc={};z(Gc,nc);var Hc=[];Gc.prototype.Sb=function(){C(this.j,P),this.j.length=0},Gc.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))},z(Jc,nc),s=Jc.prototype,s.hd=j,s.Bc=m,s.Gc=function(t){this.Bc=t},s.addEventListener=function(t,e,n,i){O(this,t,e,n,i)},s.removeEventListener=function(t,e,n,i){Bc(this,t,e,n,i)},s.dispatchEvent=function(t){var e=t.type||t,i=N;if(e in i){if(u(t))t=new pc(t,this);else if(t instanceof pc)t.target=t.target||this;else{var o=t,t=new pc(e,this);qb(t,o)}var s,r,o=1,i=i[e],e=j in i;if(e){for(s=[],r=this;r;r=r.Bc)s.push(r);r=i[j],r.O=r.m;for(var a=s.length-1;!t.Aa&&0<=a&&r.O;a--)t.currentTarget=s[a],o&=Ec(r,s[a],t.type,j,t)&&t.Ub!=n}if(n in i)if(r=i[n],r.O=r.m,e)for(a=0;!t.Aa&&a<s.length&&r.O;a++)t.currentTarget=s[a],o&=Ec(r,s[a],t.type,n,t)&&t.Ub!=n;else for(s=this;!t.Aa&&s&&r.O;s=s.Bc)t.currentTarget=s,o&=Ec(r,s,t.type,n,t)&&t.Ub!=n;t=Boolean(o)}else t=j;return t},Kc.prototype.contains=function(t){return this&&t?t instanceof Kc?t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom:t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom:n},Lc.prototype.contains=function(t){return t instanceof Lc?this.left<=t.left&&this.left+this.width>=t.left+t.width&&this.top<=t.top&&this.top+this.height>=t.top+t.height:t.x>=this.left&&t.x<=this.left+this.width&&t.y>=this.top&&t.y<=this.top+this.height};var bd=F?"MozUserSelect":G?"WebkitUserSelect":m,ed={thin:2,medium:4,thick:6},Wc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;z(hd,Jc);var id=E||F&&I("1.9.3");s=hd.prototype,s.clientX=0,s.clientY=0,s.screenX=0,s.screenY=0,s.Ld=0,s.Md=0,s.Ka=0,s.La=0,s.md=j,s.xa=n,s.zd=0,s.de=0,s.ae=n,s.Hc=n,s.Eb=r("ka"),s.le=function(t){var e="mousedown"==t.type;if(!this.md||this.xa||e&&!uc(t))this.dispatchEvent("earlycancel");else{if(kd(t),0==this.zd){if(!this.dispatchEvent(new ld("start",this,t.clientX,t.clientY,t)))return;this.xa=j,t.preventDefault()}else t.preventDefault();var e=this.M,i=e.documentElement,o=!id;Q(this.ka,e,["touchmove","mousemove"],this.Zd,o),Q(this.ka,e,["touchend","mouseup"],this.Cb,o),id?(i.setCapture(n),Q(this.ka,i,"losecapture",this.Cb)):Q(this.ka,e?e.parentWindow||e.defaultView:window,"blur",this.Cb),E&&this.ae&&Q(this.ka,e,"dragstart",qc),this.je&&Q(this.ka,this.je,"scroll",this.ge,o),this.clientX=this.Ld=t.clientX,this.clientY=this.Md=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,this.Hc?(t=this.target,e=t.offsetLeft,i=t.offsetParent,!i&&"fixed"==Oc(t,"position")&&(i=K(t).documentElement),i?(F?(o=gd(i),e+=o.left):db(8)&&(o=gd(i),e-=o.left),t=ad(i)?i.clientWidth-(e+t.offsetWidth):e):t=e):t=this.target.offsetLeft,this.Ka=t,this.La=this.target.offsetTop,this.Ac=Db(rb(this.M)),this.de=qa()}},s.Cb=function(t,e){if(this.ka.Sb(),id&&this.M.releaseCapture(),this.xa){kd(t),this.xa=n;var i=md(this,this.Ka),o=nd(this,this.La);this.dispatchEvent(new ld("end",this,t.clientX,t.clientY,t,i,o,e||"touchcancel"==t.type))}else this.dispatchEvent("earlycancel");("touchend"==t.type||"touchcancel"==t.type)&&t.preventDefault()},s.Zd=function(t){if(this.md){kd(t);var e=(this.Hc&&jd(this)?-1:1)*(t.clientX-this.clientX),n=t.clientY-this.clientY;if(this.clientX=t.clientX,this.clientY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,!this.xa){var i=this.Ld-this.clientX,o=this.Md-this.clientY;if(i*i+o*o>this.zd){if(!this.dispatchEvent(new ld("start",this,t.clientX,t.clientY,t)))return void(this.ld||this.Cb(t));this.xa=j}}n=od(this,e,n),e=n.x,n=n.y,this.xa&&this.dispatchEvent(new ld("beforedrag",this,t.clientX,t.clientY,t,e,n))&&(pd(this,t,e,n),t.preventDefault())}},s.ge=function(t){var e=od(this,0,0);t.clientX=this.clientX,t.clientY=this.clientY,pd(this,t,e.x,e.y)},s.kd=function(t,e){this.Hc&&jd(this)?this.target.style.right=t+"px":this.target.style.left=t+"px",this.target.style.top=e+"px"},z(ld,pc),rd.prototype.addHandler=function(t,e){this.Za[t]||(this.Za[t]=[]),this.Za[t].push(e)},rd.prototype.Tb=function(t,e){var n=this.Za[t];n&&D(n,e)},rd.prototype.fireEvent=function(t,e,i){var o=n;return(t=this.Za[t])&&C(t,function(t){t=t(e,i),ca(t)&&!t&&(o=j)}),o},s=sd.prototype,s.m=0,s.Ic=0,s.clear=function(){this.Y={},this.Ic=this.m=this.j.length=0},s.remove=function(t){return ud(this.Y,t)?(delete this.Y[t],this.m--,this.Ic++,this.j.length>2*this.m&&td(this),j):n},s.get=function(t,e){return ud(this.Y,t)?this.Y[t]:e},s.set=function(t,e){ud(this.Y,t)||(this.m++,this.j.push(t),this.Ic++),this.Y[t]=e},s=Hd.prototype,s.ba=function(t,e){var n=i,o=i;u(t)?(n=t,o=e):v(t)&&(o=t),n?(n=this.g.get(n))&&n.ba(o):C(W(this.g),function(t){t.ba(o)})},s.stopSelection=function(t){t?(t=this.g.get(t))&&t.stopSelection():C(W(this.g),function(t){t.stopSelection()})},s.J=function(t,e){if(Od(this,t.src)){var n=this.g.get(t.src);n?n.J(t,e):(this.Fa.push(t),e&&D(this.Fa,e))}},s.addHandler=function(t,e){C(W(this.g),function(n){n.addHandler(t,e)}),this.Uc.push({type:t,Pa:e})},s.zb=function(t){this.bb.push(t),C(W(this.g),function(e){t.onInitAnnotator&&t.onInitAnnotator(e)})},s.destroy=function(t){if(t){var e=this.g.get(t);e&&(e.destroy(),this.g.remove(t))}else C(W(this.g),function(t){t.destroy()}),this.g.clear()},s.la=function(t){if(Od(this,t)&&(t=this.g.get(t)))return t.la().getName()},s.t=function(t){if(t){var e=this.g.get(t);return e?e.t():Aa(this.Fa,function(e){return e.src==t})}var n=[];return C(W(this.g),function(t){Ga(n,t.t())}),Ga(n,this.Fa),n},s.ma=function(t){if(Od(this,t)&&(t=this.g.get(t)))return Ba(t.ma(),function(t){return t.getName()})},s.ea=function(t){Md(this,t,n)},s.N=function(t){Nd(this,t,n)},s.o=function(t){if(t){if(Od(this,t.src)){var e=this.g.get(t.src);e&&e.o(t)}}else C(W(this.g),function(t){t.o()})},s.init=function(){this.bd&&Ga(this.Ha,this.bd()),Ld(this);var t=this,e=O(window,"scroll",function(){0<t.Ha.length?Ld(t):P(e)})},s.xc=function(t){this.Wb(t)&&Kd(this,t)},s.A=function(t){if(Od(this,t.src)){var e=this.g.get(t.src);e?e.A(t):this.$b.push(t)}},s.sb=function(t,e){if(Od(this,t)){var n=this.g.get(t);n&&n.Jd(e)}},s.ga=function(t){this.bc=t,C(W(this.g),function(e){e.ga(t)})},s.Da=function(t){Md(this,t,j)},s.Z=function(t){Nd(this,t,j)};var Qd={};s=Rd.prototype,s.wa="",s.set=function(t){this.wa=""+t},s.append=function(t,e,n){if(this.wa+=t,e!=m)for(var i=1;i<arguments.length;i++)this.wa+=arguments[i];return this},s.clear=function(){this.wa=""},s.toString=r("wa");var Td={we:"<",ve:">",oe:"&",xe:" ",ze:'"',pe:"'"},Ud={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,var:0},Vd=/&/g,Wd=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Xd=/</g,Yd=/>/g,Zd=/\"/g,$d=/=/g,ae=/\0/g,be=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,ce=/^#(\d+)$/,de=/^#x([0-9A-Fa-f]+)$/,ee=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)","i"),fe=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");Sd.prototype.parse=function(t,e){var o,s,r,a=m,h=n,c=[];for(t.Q=[],t.oa=n;e;){var u=e.match(h?ee:fe),e=e.substring(u[0].length);if(h)if(u[1]){var f=u[1].toLowerCase();if(u[2]){switch(u=u[3],u.charCodeAt(0)){case 34:case 39:u=u.substring(1,u.length-1)}u=u.replace(ae,"").replace(be,oa(this.be,this))}else u=f;c.push(f,u)}else u[4]&&(s!==i&&(r?t.Kd&&t.Kd(o,c):t.nd&&t.nd(o)),r&&12&s&&(a=a===m?e.toLowerCase():a.substring(a.length-e.length),h=a.indexOf("</"+o),0>h&&(h=e.length),4&s?t.gd&&t.gd(e.substring(0,h)):t.Id&&t.Id(e.substring(0,h).replace(Wd,"&amp;$1").replace(Xd,"&lt;").replace(Yd,"&gt;")),e=e.substring(h)),o=s=r=i,c.length=0,h=n);else if(u[1])ge(t,u[0]);else if(u[3])r=!u[2],h=j,o=u[3].toLowerCase(),s=Ud.hasOwnProperty(o)?Ud[o]:i;else if(u[4])ge(t,u[4]);else if(u[5])switch(u[5]){case"<":ge(t,"&lt;");break;case">":ge(t,"&gt;");break;default:ge(t,"&amp;")}}for(a=t.Q.length;0<=--a;)t.ha.append("</",t.Q[a],">");t.Q.length=0},Sd.prototype.be=function(t){if(t=t.toLowerCase(),Td.hasOwnProperty(t))return Td[t];var e=t.match(ce);return e?String.fromCharCode(parseInt(e[1],10)):(e=t.match(de))?String.fromCharCode(parseInt(e[1],16)):""},z(ie,he);var je={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};ie.prototype.Kd=function(t,e){if(!this.oa&&Ud.hasOwnProperty(t)){var n=Ud[t];if(!(32&n))if(16&n)this.oa=!(2&n);else{for(var o=e,s=0;s<o.length;s+=2){var r,a=o[s],h=o[s+1],c=m;if(r=t+"::"+a,(je.hasOwnProperty(r)||(r="*::"+a,je.hasOwnProperty(r)))&&(c=je[r]),c!==m)switch(c){case 0:break;case 2:case 3:h=m;break;case 4:case 5:case 6:case 7:case 8:case 9:h=this.Ob?this.Ob(h):h;break;case 1:h=this.Od&&this.Od(h);break;case 11:h&&"#"===h.charAt(0)?(h=this.Ob?this.Ob(h):h)&&(h="#"+h):h=m;break;default:h=m}else h=m;o[s+1]=h}if(e=o){for(2&n||this.Q.push(t),this.ha.append("<",t),n=0,o=e.length;n<o;n+=2)s=e[n],a=e[n+1],a!==m&&a!==i&&this.ha.append(" ",s,'="',a.replace(Vd,"&amp;").replace(Xd,"&lt;").replace(Yd,"&gt;").replace(Zd,"&#34;").replace($d,"&#61;"),'"');this.ha.append(">")}}}},ie.prototype.nd=function(t){if(this.oa)this.oa=n;else if(Ud.hasOwnProperty(t)){var e=Ud[t];if(!(50&e)){if(1&e)for(e=this.Q.length;0<=--e;){var i=this.Q[e];if(i===t)break;if(!(1&Ud[i]))return}else for(e=this.Q.length;0<=--e&&this.Q[e]!==t;);if(!(0>e)){for(var o=this.Q.length;--o>e;)i=this.Q[o],1&Ud[i]||this.ha.append("</",i,">");this.Q.length=e,this.ha.append("</",t,">")}}}},ie.prototype.Id=function(t){this.oa||this.ha.append(t)},ie.prototype.gd=function(t){this.oa||this.ha.append(t)},z(ne,Jc),s=ne.prototype,s.F=m,s.Ib=m,s.uc=m,s.Jb=m,s.qa=-1,s.pa=-1,s.mc=n;var pe={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},qe={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},re=E||G&&I("525"),se=Na&&F;s=ne.prototype,s.Wd=function(t){G&&(17==this.qa&&!t.ctrlKey||18==this.qa&&!t.altKey)&&(this.pa=this.qa=-1),re&&!ke(t.keyCode,this.qa,t.shiftKey,t.ctrlKey,t.altKey)?this.handleEvent(t):(this.pa=F?me(t.keyCode):t.keyCode,se&&(this.mc=t.altKey))},s.Yd=function(t){this.pa=this.qa=-1,this.mc=t.altKey},s.handleEvent=function(t){var e,n,i=t.n,o=i.altKey;E&&"keypress"==t.type?(e=this.pa,n=13!=e&&27!=e?i.keyCode:0):G&&"keypress"==t.type?(e=this.pa,n=0<=i.charCode&&63232>i.charCode&&le(e)?i.charCode:0):Sa?(e=this.pa,n=le(e)?i.keyCode:0):(e=i.keyCode||this.pa,n=i.charCode||0,se&&(o=this.mc),Na&&63==n&&224==e&&(e=191));var s=e,r=i.keyIdentifier;e?63232<=e&&e in pe?s=pe[e]:25==e&&t.shiftKey&&(s=9):r&&r in qe&&(s=qe[r]),t=s==this.qa,this.qa=s,i=new te(s,n,t,i),i.altKey=o,this.dispatchEvent(i)},s.d=r("F"),s.detach=function(){this.Ib&&(P(this.Ib),P(this.uc),P(this.Jb),this.Jb=this.uc=this.Ib=m),this.F=m,this.pa=this.qa=-1},z(te,sc),ea(ue),ue.prototype.fe=0,ue.pb(),z(ve,Jc),ve.prototype.$d=ue.pb();var we=m;s=ve.prototype,s.Hb=m,s.fa=n,s.F=m,s.ra=m,s.za=m,s.hb=m,s.Ja=m,s.ne=n,s.d=r("F"),s.Eb=function(){return this.sc||(this.sc=new Gc(this))},s.Gc=function(t){this.za&&this.za!=t&&g(Error("Method not supported")),ve.K.Gc.call(this,t)},s.pd=r("kb"),s.jb=function(t){this.fa&&g(Error("Component already rendered")),t&&this.gb(t)?(this.ne=j,this.kb&&this.kb.M==K(t)||(this.kb=rb(t)),
this.jd(t),this.Ma()):g(Error("Invalid element to decorate"))},s.gb=aa(j),s.jd=function(t){this.F=t},s.Ma=function(){function t(t){!t.fa&&t.d()&&t.Ma()}this.fa=j,this.hb&&C(this.hb,t,i)},s.Db=function(){function t(t){t.fa&&t.Db()}this.hb&&C(this.hb,t,i),this.sc&&this.sc.Sb(),this.fa=n},s.nb=r("F"),s.Va=function(t){this.fa&&g(Error("Component already rendered")),this.ra=t},s.removeChild=function(t,e){if(t){var n,o=u(t)?t:t.Hb||(t.Hb=":"+(t.$d.fe++).toString(36));this.Ja&&o?(n=this.Ja,n=(o in n?n[o]:i)||m):n=m,t=n,o&&t&&(n=this.Ja,o in n&&delete n[o],D(this.hb,t),e&&(t.Db(),t.F&&zb(t.F)),o=t,o==m&&g(Error("Unable to set parent component")),o.za=m,ve.K.Gc.call(o,m))}return t||g(Error("Child is not in parent component")),t};var ze;ea(ye),s=ye.prototype,s.nb=function(t){return t},s.lb=function(t,e,n){if(t=t.d?t.d():t)if(E&&!I("7")){var i=Ae(hb(t),e);i.push(e),pa(n?ib:kb,t).apply(m,i)}else n?ib(t,e):kb(t,e)},s.gb=aa(j),s.jb=function(t,e){if(e.id){var i=e.id;if(t.za&&t.za.Ja){var o=t.za.Ja,s=t.Hb;s in o&&delete o[s],o=t.za.Ja,i in o&&g(Error('The object already contains the key "'+i+'"')),o[i]=t}t.Hb=i}(i=this.nb(e))&&i.firstChild?(i=i.firstChild.nextSibling?Fa(i.childNodes):i.firstChild,t.ib=i):t.ib=m;var r=0,a=this.ob(),h=this.ob(),c=n,u=n,i=n,o=hb(e);if(C(o,function(t){if(c||t!=a)if(u||t!=h){var e=r;if(!this.Nd){this.Bb||Be(this);var n,i=this.Bb,o={};for(n in i)o[i[n]]=n;this.Nd=o}t=parseInt(this.Nd[t],10),r=e|(isNaN(t)?0:t)}else u=j;else c=j,h==a&&(u=j)},this),t.r=r,c||(o.push(a),h==a&&(u=j)),u||o.push(h),(s=t.da)&&o.push.apply(o,s),E&&!I("7")){var f=Ae(o);0<f.length&&(o.push.apply(o,f),i=j)}return c&&u&&!s&&!i||(e.className=o.join(" ")),t.isEnabled()||this.Wa(e,1,j),8&t.r&&this.Wa(e,8,j),16&t.V&&this.Wa(e,16,!!(16&t.r)),64&t.V&&this.Wa(e,64,!!(64&t.r)),e},s.Vb=function(t,e){var n=!e,i=E||Sa?t.getElementsByTagName("*"):m;if(bd){if(n=n?"none":"",t.style[bd]=n,i)for(var o,s=0;o=i[s];s++)o.style[bd]=n}else if((E||Sa)&&(n=n?"on":"",t.setAttribute("unselectable",n),i))for(s=0;o=i[s];s++)o.setAttribute("unselectable",n)},s.Va=function(t,e){this.lb(t,this.ob()+"-rtl",e)},s.Cd=function(t){var e;return 32&t.V&&(e=t.Na())?Cb(e):n},s.Fc=function(t,e){var n;if(32&t.V&&(n=t.Na())){if(!e&&32&t.r){try{n.blur()}catch(t){}32&t.r&&t.qd()}Cb(n)!=e&&(e?n.tabIndex=0:(n.tabIndex=-1,n.removeAttribute("tabIndex")))}},s.P=function(t,e,n){var i=t.d();if(i){var o;this.Bb||Be(this),(o=this.Bb[e])&&this.lb(t,o,n),this.Wa(i,e,n)}},s.Wa=function(t,e,n){ze||(ze={1:"disabled",8:"selected",16:"checked",64:"expanded"}),(e=ze[e])&&t.setAttribute("aria-"+e,n)},s.sa=function(t,e){var n=this.nb(t);if(n&&(yb(n),e))if(u(e))if("textContent"in n)n.textContent=e;else if(n.firstChild&&3==n.firstChild.nodeType){for(;n.lastChild!=n.firstChild;)n.removeChild(n.lastChild);n.firstChild.data=e}else yb(n),n.appendChild(K(n).createTextNode(e));else{var i=function(t){if(t){var e=K(n);n.appendChild(u(t)?e.createTextNode(t):t)}};ga(e)?C(e,i):!ha(e)||"nodeType"in e?i(e):C(Fa(e),i)}},s.Na=function(t){return t.d()},s.ob=aa("goog-control");var Ce={};z(De,ve),s=De.prototype,s.ib=m,s.r=0,s.V=39,s.oc=255,s.me=0,s.Yb=j,s.da=m,s.tc=j,s.lc=n,s.ie=m,s.Na=function(){return this.G.Na(this)},s.lb=function(t,e){e?t&&(this.da?Ea(this.da,t)||this.da.push(t):this.da=[t],this.G.lb(this,t,j)):t&&this.da&&(D(this.da,t),0==this.da.length&&(this.da=m),this.G.lb(this,t,n))},s.nb=function(){return this.G.nb(this.d())},s.gb=function(t){return this.G.gb(t)},s.jd=function(t){this.F=t=this.G.jb(this,t);var e=this.ie||i;e&&t.setAttribute("role",e),this.lc||this.G.Vb(t,n),this.Yb="none"!=t.style.display},s.Ma=function(){De.K.Ma.call(this);var t=this.G;if(this.ra==m&&(this.ra=ad(this.fa?this.F:this.kb.M.body)),this.ra&&t.Va(this.d(),j),this.isEnabled()&&t.Fc(this,this.Yb),this.V&-2&&(this.tc&&Fe(this,j),32&this.V&&(t=this.Na()))){var e=this.vc||(this.vc=new ne);oe(e,t),Q(Q(Q(this.Eb(),e,"key",this.Xd),t,"focus",this.Vd),t,"blur",this.qd)}},s.Db=function(){De.K.Db.call(this),this.vc&&this.vc.detach(),this.Yb&&this.isEnabled()&&this.G.Fc(this,n)},s.sa=function(t){this.G.sa(this.d(),t),this.ib=t},s.Va=function(t){De.K.Va.call(this,t);var e=this.d();e&&this.G.Va(e,t)},s.Vb=function(t){this.lc=t;var e=this.d();e&&this.G.Vb(e,t)},s.isEnabled=function(){return!(1&this.r)},s.setActive=function(t){He(this,4,t)&&this.P(4,t)},s.P=function(t,e){this.V&t&&e!=!!(this.r&t)&&(this.G.P(this,t,e),this.r=e?this.r|t:this.r&~t)},s.vd=function(t){(!t.relatedTarget||!Bb(this.d(),t.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&X(this,2)&&Ge(this,j)},s.ud=function(t){t.relatedTarget&&Bb(this.d(),t.relatedTarget)||!this.dispatchEvent("leave")||(X(this,4)&&this.setActive(n),X(this,2)&&Ge(this,n))},s.Gb=da,s.sd=function(t){this.isEnabled()&&(X(this,2)&&Ge(this,j),uc(t)&&(X(this,4)&&this.setActive(j),this.G.Cd(this)&&this.Na().focus())),!this.lc&&uc(t)&&t.preventDefault()},s.wd=function(t){this.isEnabled()&&(X(this,2)&&Ge(this,j),4&this.r&&Ie(this,t)&&X(this,4)&&this.setActive(n))},s.rd=function(t){this.isEnabled()&&Ie(this,t)},s.Vd=function(){X(this,32)&&He(this,32,j)&&this.P(32,j)},s.qd=function(){X(this,4)&&this.setActive(n),X(this,32)&&He(this,32,n)&&this.P(32,n)},s.Xd=function(t){return this.Yb&&this.isEnabled()&&13==t.keyCode&&Ie(this,t)?(t.preventDefault(),t.stopPropagation(),j):n},v(De)||g(Error("Invalid component class "+De)),v(ye)||g(Error("Invalid renderer class "+ye));var Je=ja(De);Ce[Je]=ye,v(Ke)||g(Error("Invalid decorator function "+Ke)),z(Le,ye),ea(Le),s=Le.prototype,s.jb=function(t,e){return Ee(t),t.oc&=-256,t.fa&&32&t.r&&g(Error("Component already rendered")),32&t.r&&t.P(32,n),t.V&=-33,Le.K.jb.call(this,t,e),t.sa(e.value),e},s.gb=function(t){return"TEXTAREA"==t.tagName},s.Va=da,s.Cd=function(t){return t.isEnabled()},s.Fc=da,s.P=function(t,e,n){Le.K.P.call(this,t,e,n),(t=t.d())&&1==e&&(t.disabled=n)},s.Wa=da,s.sa=function(t,e){t&&(t.value=e)},s.ob=aa("goog-textarea"),z(Ne,De);var Oe=F||G;s=Ne.prototype,s.Sa=n,s.na=0,s.ce=0,s.Fd=0,s.yd=n,s.Nb=n,s.Ec=n,s.Dc=n,s.sa=function(t){Ne.K.sa.call(this,t),this.d()&&this.Oa()},s.Ma=function(){Ne.K.Ma.call(this);var t=this.d();R(t,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}),this.rb=dd(t,"padding"),this.ed=gd(t),Q(Q(Q(Q(this.Eb(),t,"scroll",this.Oa),t,"focus",this.Oa),t,"keyup",this.Oa),t,"mouseup",this.ee),this.d()&&this.Oa()},s.Oa=function(){if(!this.Sa){var t=n;this.Sa=j;var e=this.d(),i=this.na;if(e.scrollHeight){var o=n,s=n,r=Se(this),a=e.offsetHeight,h=Qe(this),c=Re(this);h&&r<h?(Te(this,h),o=j):c&&r>c?(Te(this,c),e.style.overflowY="",s=j):a!=r?Te(this,r):this.na||(this.na=r),!o&&!s&&Oe&&(t=j)}else Ue(this);this.Sa=n,t&&(t=this.d(),this.Sa||(this.Sa=j,e=n,t.value||(t.value=" ",e=j),(s=t.scrollHeight)?(r=Se(this),o=Qe(this),a=Re(this),!(o&&r<=o)&&!(a&&r>=a)&&(a=this.rb,t.style.paddingBottom=a.bottom+1+"px",Se(this)==r&&(t.style.paddingBottom=a.bottom+s+"px",t.scrollTop=0,s=Se(this)-s,s>=o?Te(this,s):Te(this,o)),t.style.paddingBottom=a.bottom+"px")):Ue(this),e&&(t.value=""),this.Sa=n)),i!=this.na&&this.dispatchEvent("resize")}},s.ee=function(){var t=this.d(),e=t.offsetHeight;t.filters&&t.filters.length&&(t=t.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(e-=t.offX),e!=this.na&&(this.na=this.Fd=e)},E&&I(8);var Ye={"\0":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"},We=/[\x00\x22\x26\x27\x3c\x3e]/g;s=af.prototype,s.kc=function(t){var e=wb("div","annotorious-editor-field");u(t)?e.innerHTML=t:v(t)?this.Ya.push({D:e,qc:t}):Ab(t)&&e.appendChild(t),t=this.Qd,t.parentNode&&t.parentNode.insertBefore(e,t)},s.open=function(t){(this.vb=this.$c=t)&&this.Ia.sa(String(t.text)),V(this.element,j),this.Ia.d().focus(),C(this.Ya,function(e){var n=e.qc(t);u(n)?e.D.innerHTML=n:Ab(n)&&(yb(e.D),e.D.appendChild(n))}),this.e.fireEvent("onEditorShown",t)},s.close=function(){V(this.element,n),this.Ia.sa("")},s.setPosition=function(t){Pc(this.element,t.x,t.y)},s.od=function(){var t;t=this.Ia.d().value;var e=new Rd;return(new Sd).parse(new ie(e,function(t){return t},i),t),t=e.toString(),this.vb?this.vb.text=t:this.vb=new Gd(this.Rd.src,t,this.e.la().getShape()),this.vb},af.prototype.addField=af.prototype.kc,af.prototype.getAnnotation=af.prototype.od,bf.prototype.Zb=function(){var t=this;this.Zc=O(this.Vc,"mouseover",function(){t.show(),window.clearTimeout(t.ec)}),this.Yc=O(this.Vc,"mouseout",function(){df(t)}),this.e.addHandler("onMouseOverItem",this.ic),this.e.addHandler("onMouseOutOfItem",this.hc)},bf.prototype.wb=function(){P(this.Zc),P(this.Yc),this.e.Tb("onMouseOverItem",this.ic),this.e.Tb("onMouseOutOfItem",this.hc)},bf.prototype.show=function(){window.clearTimeout(this.ec),U(this.Xc,.8);var t=this;this.ec=window.setTimeout(function(){df(t)},3e3)},bf.prototype.destroy=function(){this.wb(),delete this.Zc,delete this.Yc,delete this.ic,delete this.hc,zb(this.element)},s=ef.prototype,s.kc=function(t){var e=wb("div","annotorious-popup-field");u(t)?e.innerHTML=t:v(t)?this.Ya.push({D:e,qc:t}):Ab(t)&&e.appendChild(t),this.element.appendChild(e)},s.startHideTimer=function(){if(this.cc=n,!this.cb){var t=this;this.cb=window.setTimeout(function(){t.e.fireEvent("beforePopupHide",t),t.cc||(U(t.element,0),R(t.element,"pointer-events","none"),U(t.R,.9),delete t.cb)},150)}},s.clearHideTimer=function(){this.cc=j,this.cb&&(window.clearTimeout(this.cb),delete this.cb)},s.show=function(t,e){if(this.clearHideTimer(),e&&this.setPosition(e),t&&this.setAnnotation(t),this.ac&&window.clearTimeout(this.ac),U(this.R,.9),ff){var n=this;this.ac=window.setTimeout(function(){U(n.R,0)},1e3)}U(this.element,.9),R(this.element,"pointer-events","auto"),this.e.fireEvent("onPopupShown",this.f)},s.setPosition=function(t){Pc(this.element,new J(t.x,t.y))},s.setAnnotation=function(t){this.f=t,this.Sd.innerHTML=t.text?t.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>',"editable"in t&&t.editable==n?V(this.R,n):V(this.R,j),C(this.Ya,function(e){var n=e.qc(t);u(n)?e.D.innerHTML=n:Ab(n)&&(yb(e.D),e.D.appendChild(n))})},ef.prototype.addField=ef.prototype.kc,s=gf.prototype,s.J=function(t,e){this.h.J(t,e)},s.addHandler=function(t,e){this.w.addHandler(t,e)},s.fireEvent=function(t,e,n){return this.w.fireEvent(t,e,n)},s.la=r("v"),s.o=function(t){this.h.o(t)},s.A=function(t){this.h.A(t)},s.Tb=function(t,e){this.w.Tb(t,e)},s.stopSelection=function(t){ff&&V(this.c,n),this.eb&&(this.eb(),delete this.eb),this.v.stopSelection(),t&&this.h.J(t)},s=lf.prototype,s.J=function(t,e){e&&(e==this.f&&delete this.f,D(this.Ea,e),delete this.aa[Fd(e.shapes[0])]),this.Ea.push(t);var n=t.shapes[0];if("pixel"!=n.units)var i=this,n=Ed(n,function(t){return i.e.ya(t)});this.aa[Fd(t.shapes[0])]=n,of(this)},s.A=function(t){t==this.f&&delete this.f,D(this.Ea,t),delete this.aa[Fd(t.shapes[0])],of(this)},s.t=function(){return Fa(this.Ea)},s.o=function(t){(this.f=t)?this.xb=j:this.e.popup.startHideTimer(),of(this),this.ta=j},s.mb=function(t,e){var i=[],o=this;return C(this.Ea,function(s){var r;if(r=o.aa[Fd(s.shapes[0])],"rect"==r.type)r=t<r.geometry.x||e<r.geometry.y||t>r.geometry.x+r.geometry.width||e>r.geometry.y+r.geometry.height?n:j;else if("polygon"==r.type){r=r.geometry.points;for(var a=n,h=r.length-1,c=0;c<r.length;c++)r[c].y>e!=r[h].y>e&&t<(r[h].x-r[c].x)*(e-r[c].y)/(r[h].y-r[c].y)+r[c].x&&(a=!a),h=c;r=a}else r=n;r&&i.push(s)}),B.sort.call(i,function(t,e){var n=o.aa[Fd(t.shapes[0])],i=o.aa[Fd(e.shapes[0])];return Bd(n)-Bd(i)}||Ia),i};var qf="ontouchstart"in window,ff=!qf,jf=qf?"touchstart":"mousedown",rf=qf?"touchenter":"mouseover",mf=qf?"touchmove":"mousemove",sf=qf?"touchend":"mouseup",tf=qf?"touchleave":"mouseout";s=uf.prototype,s.init=function(t,e){this.Pc="#000000",this.Rc="#ffffff",this.Jc=n,this.Lc="#000000",this.Nc="#fff000",this.Kc=n,this.Mc=this.Sc=this.Qc=1,this.Oc=1.2,this.W=e,this.e=t,this.ua=e.getContext("2d"),this.ua.lineWidth=1,this.dc=n},s.Zb=function(){var t=this,e=this.W;this.fc=O(this.W,mf,function(n){if(console.log(n),n=kf(n,e),t.dc){t.B={x:n.x,y:n.y},t.ua.clearRect(0,0,e.width,e.height);var n=t.B.x-t.L.x,i=t.B.y-t.L.y;t.drawShape(t.ua,{type:"rect",geometry:{x:0<n?t.L.x:t.B.x,y:0<i?t.L.y:t.B.y,width:Math.abs(n),height:Math.abs(i)},style:{}})}}),this.gc=O(e,sf,function(i){var o=kf(i,e),s=t.getShape(),i=i.n?i.n:i;t.dc=n,s?(t.wb(),t.e.fireEvent("onSelectionCompleted",{mouseEvent:i,shape:s,viewportBounds:t.getViewportBounds()})):(t.e.fireEvent("onSelectionCanceled"),i=t.e.mb(o.x,o.y),0<i.length&&t.e.o(i[0]))})},s.wb=function(){this.fc&&(P(this.fc),delete this.fc),this.gc&&(P(this.gc),delete this.gc)},s.getName=aa("rect_drag"),s.getSupportedShapeType=aa("rect"),s.ga=function(t){t.hasOwnProperty("outline")&&(this.Pc=t.outline),t.hasOwnProperty("stroke")&&(this.Rc=t.stroke),t.hasOwnProperty("fill")&&(this.Jc=t.fill),t.hasOwnProperty("hi_outline")&&(this.Lc=t.hi_outline),t.hasOwnProperty("hi_stroke")&&(this.Nc=t.hi_stroke),t.hasOwnProperty("hi_fill")&&(this.Kc=t.hi_fill),t.hasOwnProperty("outline_width")&&(this.Qc=t.outline_width),t.hasOwnProperty("stroke_width")&&(this.Sc=t.stroke_width),t.hasOwnProperty("hi_outline_width")&&(this.Mc=t.hi_outline_width),t.hasOwnProperty("hi_stroke_width")&&(this.Oc=t.hi_stroke_width)},s.startSelection=function(t,e){var n={x:t,y:e};this.dc=j,this.Zb(n),this.L=new vd(t,e),this.e.fireEvent("onSelectionStarted",{offsetX:t,offsetY:e}),R(document.body,"-webkit-user-select","none")},s.stopSelection=function(){this.wb(),this.ua.clearRect(0,0,this.W.width,this.W.height),R(document.body,"-webkit-user-select","auto"),delete this.B},s.getShape=function(){if(this.B&&3<Math.abs(this.B.x-this.L.x)&&3<Math.abs(this.B.y-this.L.y)){var t=this.getViewportBounds(),t=this.e.Xb({x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top});return new Ad("rect",t)}},s.getViewportBounds=function(){var t,e;this.B.x>this.L.x?(t=this.B.x,e=this.L.x):(t=this.L.x,e=this.B.x);var n,i;return this.B.y>this.L.y?(n=this.L.y,i=this.B.y):(n=this.B.y,i=this.L.y),{top:n,right:t,bottom:i,left:e}},s.drawShape=function(t,e,n){var i,o,s,r;e.style||(e.style={}),"rect"==e.type&&(n?(i=e.style.hi_fill||this.Kc,n=e.style.hi_stroke||this.Nc,o=e.style.hi_outline||this.Lc,s=e.style.hi_outline_width||this.Mc,r=e.style.hi_stroke_width||this.Oc):(i=e.style.fill||this.Jc,n=e.style.stroke||this.Rc,o=e.style.outline||this.Pc,s=e.style.outline_width||this.Qc,r=e.style.stroke_width||this.Sc),e=e.geometry,o&&(t.lineJoin="round",t.lineWidth=s,t.strokeStyle=o,t.strokeRect(e.x+s/2,e.y+s/2,e.width-s,e.height-s)),n&&(t.lineJoin="miter",t.lineWidth=r,t.strokeStyle=n,t.strokeRect(e.x+s+r/2,e.y+s+r/2,e.width-2*s-r,e.height-2*s-r)),i&&(t.lineJoin="miter",t.lineWidth=r,t.fillStyle=i,t.fillRect(e.x+s+r/2,e.y+s+r/2,e.width-2*s-r,e.height-2*s-r)))},z(wf,gf),s=wf.prototype,s.ba=p(),s.cd=function(t){t.init(this,this.c),this.ia.push(t)},s.destroy=function(){var t=this.$;t.style.margin=this.ad.margin,t.style.padding=this.ad.padding;var e=this.element,n=e.parentNode;n&&n.replaceChild(t,e)},s.pc=function(t){this.h.A(t);var e=Da(this.ia,function(e){return e.getSupportedShapeType()==t.shapes[0].type});if(e){V(this.c,j),this.h.o(n);var i=this.c.getContext("2d"),o=t.shapes[0],s=this,o="pixel"==o.units?o:Ed(o,function(t){return s.ya(t)});e.drawShape(i,o)}e=Cd(t.shapes[0]).geometry,e="pixel"==t.shapes[0].units?new vd(e.x,e.y+e.height):this.ya(new vd(e.x,e.y+e.height)),this.editor.setPosition(new vd(e.x+this.$.offsetLeft,e.y+4+this.$.offsetTop)),this.editor.open(t)},s.ya=function(t){var e=Yc(this.$);return t.width?{x:t.x*e.width,y:t.y*e.height,width:t.width*e.width,height:t.height*e.height}:{x:t.x*e.width,y:t.y*e.height}},s.la=r("v"),s.t=function(){return this.h.t()},s.mb=function(t,e){return Fa(this.h.mb(t,e))},s.ma=r("ia"),s.getItem=function(){return{src:xf(this.$),element:this.$}},s.ea=function(){V(this.ja,n)},s.N=function(){this.yb=n,this.$a&&(this.$a.destroy(),delete this.$a)},s.Jd=function(t){(this.v=Da(this.ia,function(e){return e.getName()==t}))||console.log('WARNING: selector "'+t+'" not available')},s.ga=function(t){C(this.ia,function(e){e.ga(t)}),of(this.h)},s.Da=function(){V(this.ja,j)},s.Z=function(){this.yb=j,this.$a||(this.$a=new bf(this,this.element))},s.stopSelection=function(t){ff&&V(this.c,n),this.v.stopSelection(),t&&this.h.J(t)},s.Xb=function(t){var e=Yc(this.$);return t.width?{x:t.x/e.width,y:t.y/e.height,width:t.width/e.width,height:t.height/e.height}:{x:t.x/e.width,y:t.y/e.height}},wf.prototype.addSelector=wf.prototype.cd,wf.prototype.fireEvent=wf.prototype.fireEvent,wf.prototype.setCurrentSelector=wf.prototype.Jd,wf.prototype.toItemCoordinates=wf.prototype.Xb,z(yf,Hd),yf.prototype.Fb=function(t){return xf(t)},yf.prototype.zc=function(t){return new wf(t)},yf.prototype.Wb=function(t){return Ab(t)?"IMG"==t.tagName:n},s=Af.prototype,s.destroy=function(){this.tb.destroy()},s.ab=function(){var t=this.I.Lb.div,e=$c(t),n=Uc(t,this.X.div),t=n.y,n=n.x,i=e.width,o=e.height,e=$c(this.k.element),t={y:t+o+5};n+e.width>this.S.width?(mb(this.k.element,"top-left","top-right"),t.x=n+i-e.width):(mb(this.k.element,"top-right","top-left"),t.x=n),0>t.x&&(t.x=0),t.x+e.width>this.S.width&&(t.x=this.S.width-e.width),t.y+e.height>this.S.height&&(t.y=this.S.height-e.height),this.k.setPosition(t)},s.jc=function(t){this.k.setAnnotation(t),this.ab(),this.k.show()},s.fb=function(t,e){t?(Uc(t.Lb.div,this.X.div),ya("height"),R(t.qb,"border-color","#fff000"),this.I=t,this.jc(t.C)):delete this.I,e&&R(e.qb,"border-color","#fff")},s.J=function(t){var e=t.shapes[0].geometry,e=new OpenLayers.Marker.Box(new OpenLayers.Bounds(e.x,e.y,e.x+e.width,e.y+e.height));ib(e.div,"annotorious-ol-boxmarker-outer"),R(e.div,"border",m);var n=wb("div","annotorious-ol-boxmarker-inner");Xc(n,"100%","100%"),e.div.appendChild(n);var i={C:t,Lb:e,qb:n},o=this;O(n,"mouseover",function(){o.I||o.fb(i),o.va=i}),O(n,"mouseout",function(){delete o.va,o.k.startHideTimer()}),this.z.push(i),B.sort.call(this.z,function(t,e){return Bd(e.C.shapes[0])-Bd(t.C.shapes[0])}||Ia);var s=1e4;C(this.z,function(t){R(t.Lb.div,"z-index",s),s++}),this.tb.addMarker(e)},s.A=function(t){var e=Da(this.z,function(e){return e.C==t});e&&(D(this.z,e),this.tb.removeMarker(e.Lb))},s.t=function(){return Ba(this.z,function(t){return t.C})},s.o=function(t){t||this.k.startHideTimer()},z(Bf,gf),s=Bf.prototype,s.Z=p(),s.N=p(),s.ba=function(t){R(this.c,"pointer-events","auto");var e=this;V(this.c,j),U(this.U,.8),window.setTimeout(function(){U(e.U,0)},2e3),t&&(this.eb=t)},s.destroy=function(){this.h.destroy(),zb(this.U),zb(this.c)},s.cd=p(),s.pc=function(t){this.h.A(t);var e=this.v,n=this;if(e){V(this.c,j),this.h.o(i);var o=this.c.getContext("2d"),s=Ed(t.shapes[0],function(t){return n.ya(t)});console.log(s),e.drawShape(o,s),e=Cd(s).geometry,this.editor.setPosition(new vd(e.x,e.y+e.height)),this.editor.open(t)}},s.ya=function(t){var e=this.X.getViewPortPxFromLonLat(new OpenLayers.LonLat(t.x,t.y));return(t=t.width?this.X.getViewPortPxFromLonLat(new OpenLayers.LonLat(t.x+t.width,t.y+t.height)):n)?{x:e.x,y:t.y,width:t.x-e.x+2,height:e.y-t.y+2}:{x:e.x,y:e.y}},s.t=function(){return this.h.t()},s.ma=p(),s.getItem=function(){return{src:"map://openlayers/something"}},s.sb=p(),s.Xb=function(t){var e=this.X.getLonLatFromPixel(new OpenLayers.Pixel(t.x,t.y));return(t=t.width?new OpenLayers.Pixel(t.x+t.width-2,t.y+t.height-2):n)?(t=this.X.getLonLatFromPixel(t),e={x:e.lon,y:t.lat,width:t.lon-e.lon,height:e.lat-t.lat},console.log(e),e):{x:e.lon,y:e.lat}},z(Cf,Hd),Cf.prototype.Fb=aa("map://openlayers/something"),Cf.prototype.zc=function(t){return new Bf(t)},Cf.prototype.Wb=function(t){return t instanceof OpenLayers.Map},s=Df.prototype,s.ab=function(){var t=this.T.element,e=this.I.Rb,n=$c(e),e=Uc(e,t),t=e.y,e=e.x,i=n.width,o=n.height,n=$c(this.k.element),t={x:e,y:t+o+12};mb(this.k.element,"top-right","top-left"),this.T.isFullPage()||(e+n.width>this.S.width&&(mb(this.k.element,"top-left","top-right"),t.x=e+i-n.width),0>t.x&&(t.x=0),t.x+n.width>this.S.width&&(t.x=this.S.width-n.width),t.y+n.height>this.S.height&&(t.y=this.S.height-n.height)),this.k.setPosition(t)},s.jc=function(t){this.k.setAnnotation(t),this.ab(),this.k.show()},s.fb=function(t,e){t?(R(t.qb,"border-color","#fff000"),this.I=t,this.jc(t.C)):delete this.I,e&&R(e.qb,"border-color","#fff")},s.J=function(t){var e=t.shapes[0].geometry,n=wb("div","annotorious-ol-boxmarker-outer"),i=wb("div","annotorious-ol-boxmarker-inner");Xc(i,"100%","100%"),n.appendChild(i);var e=new OpenSeadragon.Rect(e.x,e.y,e.width,e.height),o={C:t,Rb:n,qb:i},s=this;O(i,"mouseover",function(){s.I||s.fb(o),s.va=o}),O(i,"mouseout",function(){delete s.va,s.k.startHideTimer()}),this.z.push(o),B.sort.call(this.z,function(t,e){return Bd(e.C.shapes[0])-Bd(t.C.shapes[0])}||Ia);var r=1;C(this.z,function(t){R(t.Rb,"z-index",r),r++}),this.T.drawer.addOverlay(n,e)},s.A=function(t){var e=Da(this.z,function(e){return e.C==t});e&&(D(this.z,e),this.T.drawer.removeOverlay(e.Rb))},s.t=function(){return Ba(this.z,function(t){return console.log(t),t.C})},s.o=p(),s.destroy=function(){var t=this;C(this.z,function(e){t.T.removeOverlay(e.Rb)}),this.z=[]},z(Ef,gf),s=Ef.prototype,s.Z=p(),s.N=p(),s.destroy=function(){this.h.destroy(),delete this.h},s.ba=function(t){R(this.c,"pointer-events","auto");var e=this;V(this.c,j),U(this.U,.8),window.setTimeout(function(){U(e.U,0)},2e3),t&&(this.eb=t)},s.pc=function(t){this.h.A(t);var e=this.v,n=this;if(e){V(this.c,j),this.h.o(i);var o=this.c.getContext("2d"),s=Ed(t.shapes[0],function(t){return n.ya(t)});e.drawShape(o,s),e=Cd(s).geometry,this.editor.setPosition(new vd(e.x,e.y+e.height+4)),this.editor.open(t)}},s.ya=function(t){var e=qd(this.element);e.top+=window.pageYOffset,e.left+=window.pageXOffset;var i=new OpenSeadragon.Point(t.x,t.y),t=t.width?new OpenSeadragon.Point(t.x+t.width,t.y+t.height):n,i=this.T.viewport.viewportToWindowCoordinates(i);return t?(t=this.T.viewport.viewportToWindowCoordinates(t),{x:i.x-e.left,y:i.y-e.top,width:t.x-i.x+2,height:t.y-i.y+2}):i},s.t=function(){return this.h.t()},s.ma=p(),s.getItem=function(){return{src:"dzi://openseadragon/something"}},s.sb=p(),s.la=r("v"),s.Xb=function(t){var e=qd(this.element);e.top+=window.pageYOffset,e.left+=window.pageXOffset;var i=new OpenSeadragon.Point(t.x+e.left,t.y+e.top),t=t.width?new OpenSeadragon.Point(t.x+e.left+t.width-2,t.y+e.top+t.height-2):n,i=this.T.viewport.windowToViewportCoordinates(i);return t?(t=this.T.viewport.windowToViewportCoordinates(t),{x:i.x,y:i.y,width:t.x-i.x,height:t.y-i.y}):i},z(Ff,Hd),Ff.prototype.Fb=aa("dzi://openseadragon/something"),Ff.prototype.zc=function(t){return new Ef(t)},Ff.prototype.Wb=function(t){return t.id&&0==t.id.indexOf("openseadragon")&&t.hasOwnProperty("drawer")?j:n},s=Y.prototype,s.ba=function(t,e){var n=i,o=i;if(u(t)?(n=t,o=e):v(t)&&(o=t),n){var s=Z(this,n);s&&s.ba(n,o)}else C(this.l,function(t){t.ba(o)})},s.J=function(t,e){var n;if(n=t.src,!(0<n.indexOf("://"))){var i=document.createElement("a");i.href=n,n=i.protocol+"//"+i.host+i.pathname}t.src=n,(n=Z(this,t.src))&&n.J(t,e)},s.addHandler=function(t,e){C(this.l,function(n){n.addHandler(t,e)})},s.zb=function(t,e){try{var n=new window.annotorious.plugin[t](e);"complete"==document.readyState?(n.initPlugin&&n.initPlugin(this),C(this.l,function(t){t.zb(n)})):this.bb.push(n)}catch(e){console.log("Could not load plugin: "+t)}},s.destroy=function(t){if(t){var e=Z(this,t);e&&e.destroy(t)}else C(this.l,function(t){t.destroy()})},s.la=function(t){var e=Z(this,t);if(e)return e.la(t)},s.t=function(t){if(t){var e=Z(this,t);return e?e.t(t):[]}var n=[];return C(this.l,function(t){Ga(n,t.t())}),n},s.ma=function(t){var e=Z(this,t);return e?e.ma(t):[]},s.ea=function(t){if(t){var e=Z(this,t);e&&e.ea(t)}else C(this.l,function(t){t.ea()})},s.N=function(t){if(t){var e=Z(this,t);e&&e.N(t)}else C(this.l,function(t){t.N()})},s.stopSelection=function(t){if(t){var e=Z(this,t);e&&e.stopSelection(t)}else C(this.l,function(t){t.stopSelection()})},s.o=function(t){if(t){var e=Z(this,t.src);e&&e.o(t)}else C(this.l,function(t){t.o()})},s.xc=function(t){Gf(this);var e=Da(this.l,function(e){return e.Wb(t)});e?e.xc(t):g("Error: Annotorious does not support this media type in the current version or build configuration.")},s.Sb=function(t){var e=this;C(this.t(t),function(t){e.A(t)})},s.A=function(t){var e=Z(this,t.src);e&&e.A(t)},s.reset=function(){C(this.l,function(t){t.destroy(),t.init()})},s.sb=function(t,e){var n=Z(this,t);n&&n.sb(t,e)},s.ga=function(t){C(this.l,function(e){e.ga(t)})},s.ke=function(t){t?this.Z(i):this.N(i)},s.Da=function(t){if(t){var e=Z(this,t);e&&e.Da(t)}else C(this.l,function(t){t.Da()})},s.Z=function(t){if(t){var e=Z(this,t);e&&e.Z(t)}else C(this.l,function(t){t.Z()})},window.anno=new Y,Y.prototype.activateSelector=Y.prototype.ba,Y.prototype.addAnnotation=Y.prototype.J,Y.prototype.addHandler=Y.prototype.addHandler,Y.prototype.addPlugin=Y.prototype.zb,Y.prototype.destroy=Y.prototype.destroy,Y.prototype.getActiveSelector=Y.prototype.la,Y.prototype.getAnnotations=Y.prototype.t,Y.prototype.getAvailableSelectors=Y.prototype.ma,Y.prototype.hideAnnotations=Y.prototype.ea,Y.prototype.hideSelectionWidget=Y.prototype.N,Y.prototype.highlightAnnotation=Y.prototype.o,Y.prototype.makeAnnotatable=Y.prototype.xc,Y.prototype.removeAll=Y.prototype.Sb,Y.prototype.removeAnnotation=Y.prototype.A,Y.prototype.reset=Y.prototype.reset,Y.prototype.setActiveSelector=Y.prototype.sb,Y.prototype.setProperties=Y.prototype.ga,Y.prototype.showAnnotations=Y.prototype.Da,Y.prototype.showSelectionWidget=Y.prototype.Z,window.annotorious||(window.annotorious={}),window.annotorious.plugin||(window.annotorious.plugin={}),window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Dd,window.annotorious.geometry.getBoundingRect=Cd),Y.prototype.setSelectionEnabled=Y.prototype.ke;